<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>ä¸æ­£ç»æ•°æ®ç§‘å­¦å®¶</title>
  
  <subtitle>Enjoy everything fun and challenging</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://frankchen.xyz/"/>
  <updated>2018-12-20T13:04:56.554Z</updated>
  <id>http://frankchen.xyz/</id>
  
  <author>
    <name>æ±Ÿå—æ¶ˆå¤</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>python å‘é€å¸¦å„ç§é™„ä»¶çš„é‚®ä»¶ç¤ºä¾‹</title>
    <link href="http://frankchen.xyz/2018/12/20/attachments/"/>
    <id>http://frankchen.xyz/2018/12/20/attachments/</id>
    <published>2018-12-20T12:47:39.000Z</published>
    <updated>2018-12-20T13:04:56.554Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€è¿°ä¸‹å¦‚ä½•ä½¿ç”¨pythonå‘é€å„ç§é™„ä»¶çš„é‚®ä»¶ï¼Œæ¯”å¦‚wordã€excelã€pdfã€txtï¼Œä»¥åŠåœ¨æ­£æ–‡æ’å…¥å›¾ç‰‡ç­‰ç­‰<br><a id="more"></a><br>å¦‚ä¸‹æ‰€ç¤ºï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># coding=utf-8</span></div><div class="line"></div><div class="line"><span class="keyword">import</span> smtplib</div><div class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</div><div class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> Header</div><div class="line"><span class="keyword">from</span> smtplib <span class="keyword">import</span> SMTP_SSL</div><div class="line"></div><div class="line"><span class="keyword">from</span> email.mime.image <span class="keyword">import</span> MIMEImage</div><div class="line"><span class="keyword">from</span> email.mime.multipart <span class="keyword">import</span> MIMEMultipart</div><div class="line"><span class="keyword">from</span> email.mime.application <span class="keyword">import</span> MIMEApplication</div><div class="line"><span class="keyword">from</span> email.mime.text <span class="keyword">import</span> MIMEText</div><div class="line"><span class="keyword">from</span> email.mime.base <span class="keyword">import</span> MIMEBase</div><div class="line"><span class="keyword">from</span> email.encoders <span class="keyword">import</span> encode_base64</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> traceback</div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">send_mail</span><span class="params">(mail_title,</span></span></div><div class="line">              mail_content=None,</div><div class="line">              attachment_img=None,</div><div class="line">              attachment_txt=None,</div><div class="line">              attachment_pdf=None,</div><div class="line">              attachment_excel=None,</div><div class="line">              attachment_word=None):</div><div class="line">    <span class="comment"># qqé‚®ç®±smtpæœåŠ¡å™¨</span></div><div class="line">    host_server = <span class="string">'smtp.qq.com'</span></div><div class="line">    <span class="comment"># sender_qqä¸ºå‘ä»¶äººçš„qqå·ç </span></div><div class="line">    sender_qq = <span class="string">'947118251'</span></div><div class="line">    <span class="comment"># pwdä¸ºqqé‚®ç®±çš„æˆæƒç </span></div><div class="line">    pwd = <span class="string">'tvjl******zpbebb'</span></div><div class="line">    <span class="comment"># å‘ä»¶äººçš„é‚®ç®±</span></div><div class="line">    sender_qq_mail = <span class="string">'947118251@qq.com'</span></div><div class="line">    <span class="comment"># æ”¶ä»¶äººé‚®ç®±</span></div><div class="line">    <span class="comment"># receiver = 'znwindy@gmail.com'</span></div><div class="line">    receiver = <span class="string">'947118251@qq.com'</span></div><div class="line"></div><div class="line">    <span class="keyword">try</span>:</div><div class="line">        <span class="comment"># sslç™»å½•</span></div><div class="line">        smtp = SMTP_SSL(host_server)</div><div class="line">        <span class="comment"># set_debuglevel()æ˜¯ç”¨æ¥è°ƒè¯•çš„ã€‚å‚æ•°å€¼ä¸º1è¡¨ç¤ºå¼€å¯è°ƒè¯•æ¨¡å¼ï¼Œå‚æ•°å€¼ä¸º0å…³é—­è°ƒè¯•æ¨¡å¼</span></div><div class="line">        smtp.set_debuglevel(<span class="number">1</span>)</div><div class="line">        smtp.ehlo(host_server)</div><div class="line">        smtp.login(sender_qq, pwd)</div><div class="line"></div><div class="line">        <span class="comment"># msg = MIMEText(mail_content, "plain", 'utf-8')</span></div><div class="line">        msg = MIMEMultipart(<span class="string">'related'</span>)</div><div class="line">        msg[<span class="string">"Subject"</span>] = Header(mail_title, <span class="string">'utf-8'</span>)</div><div class="line">        msg[<span class="string">"From"</span>] = sender_qq_mail</div><div class="line">        msg[<span class="string">"To"</span>] = receiver</div><div class="line"></div><div class="line">        msgAlternative = MIMEMultipart(<span class="string">'alternative'</span>)</div><div class="line">        msg.attach(msgAlternative)</div><div class="line"></div><div class="line">        <span class="comment"># image attach</span></div><div class="line">        <span class="keyword">if</span> attachment_img:</div><div class="line">            mail_body = <span class="string">'&lt;b&gt;%s&lt;/b&gt;&lt;br&gt;&lt;img src="cid:%s"&gt;&lt;br&gt;'</span> % (mail_content, attachment_img)</div><div class="line">            msgText = (MIMEText(mail_body, <span class="string">'html'</span>, <span class="string">'utf-8'</span>))</div><div class="line">            msgAlternative.attach(msgText)</div><div class="line">            <span class="keyword">with</span> open(attachment_img, <span class="string">'rb'</span>) <span class="keyword">as</span> fp:</div><div class="line">                msgImage = MIMEImage(fp.read())</div><div class="line">            msgImage.add_header(<span class="string">'Content-ID'</span>, <span class="string">'&lt;&#123;&#125;&gt;'</span>.format(attachment_img))</div><div class="line">            msg.attach(msgImage)</div><div class="line"></div><div class="line">        <span class="comment"># txt attach</span></div><div class="line">        <span class="keyword">if</span> attachment_txt:</div><div class="line">            file_name = os.path.split(attachment_txt)[<span class="number">1</span>]</div><div class="line">            att1 = MIMEText(open(attachment_txt, <span class="string">'rb'</span>).read(), <span class="string">'base64'</span>, <span class="string">'utf-8'</span>)</div><div class="line">            att1[<span class="string">"Content-Type"</span>] = <span class="string">'application/octet-stream'</span></div><div class="line">            <span class="comment"># è¿™é‡Œçš„filenameå¯ä»¥ä»»æ„å†™ï¼Œå†™ä»€ä¹ˆåå­—ï¼Œé‚®ä»¶ä¸­æ˜¾ç¤ºä»€ä¹ˆåå­—</span></div><div class="line">            att1[<span class="string">"Content-Disposition"</span>] = f<span class="string">'attachment; filename="&#123;file_name&#125;"'</span></div><div class="line">            msg.attach(att1)</div><div class="line"></div><div class="line">        <span class="comment"># pdf attach</span></div><div class="line">        <span class="keyword">if</span> attachment_pdf:</div><div class="line">            <span class="keyword">with</span> open(attachment_pdf, <span class="string">"rb"</span>) <span class="keyword">as</span> fp:</div><div class="line">                fileMsg = MIMEBase(<span class="string">'application'</span>, <span class="string">'pdf'</span>)</div><div class="line">                fileMsg.set_payload(fp.read())</div><div class="line">                encode_base64(fileMsg)</div><div class="line">                fileMsg.add_header(<span class="string">'Content-Disposition'</span>, f<span class="string">'attachment;filename=&#123;os.path.split(attachment_pdf)[1]&#125;'</span>)</div><div class="line">                msg.attach(fileMsg)</div><div class="line"></div><div class="line">        <span class="comment"># excel attach</span></div><div class="line">        <span class="keyword">if</span> attachment_excel:</div><div class="line">            part = MIMEBase(<span class="string">'application'</span>, <span class="string">"vnd.ms-excel"</span>)</div><div class="line">            <span class="keyword">with</span> open(attachment_excel, <span class="string">"rb"</span>) <span class="keyword">as</span> fp:</div><div class="line">                part.set_payload(fp.read())</div><div class="line">                encode_base64(part)</div><div class="line">                part.add_header(<span class="string">'Content-Disposition'</span>, f<span class="string">'attachment; filename="&#123;os.path.split(attachment_excel)[1]&#125;"'</span>)</div><div class="line">                msg.attach(part)</div><div class="line"></div><div class="line">        <span class="comment"># word attach</span></div><div class="line">        <span class="keyword">if</span> attachment_word:</div><div class="line">            <span class="keyword">with</span> open(attachment_word, <span class="string">"rb"</span>) <span class="keyword">as</span> fp:</div><div class="line">                part = MIMEApplication(fp.read())</div><div class="line">                part.add_header(<span class="string">'Content-Disposition'</span>, f<span class="string">'attachment; filename="&#123;os.path.split(attachment_word)[1]&#125;"'</span>)</div><div class="line">                part.set_charset(<span class="string">'utf-8'</span>)</div><div class="line">                msg.attach(part)</div><div class="line"></div><div class="line">        smtp.sendmail(sender_qq_mail, receiver, msg.as_string())</div><div class="line">        smtp.quit()</div><div class="line">        print(<span class="string">'Success!'</span>)</div><div class="line">    <span class="keyword">except</span>:</div><div class="line">        print(<span class="string">'Error!'</span>)</div><div class="line">        traceback.print_exc()</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    send_mail(mail_title=<span class="string">'çˆ¬è™«ç»“æŸäº†ï¼Œæ­£å¸¸é€€å‡º!'</span>,</div><div class="line">              mail_content=<span class="string">'ä½ å¥½ï¼Œè¿™æ˜¯ä½¿ç”¨pythonç™»å½•qqé‚®ç®±å‘é‚®ä»¶çš„æµ‹è¯•'</span>,</div><div class="line">              attachment_img=<span class="string">'../data/test.jpg'</span>,</div><div class="line">              attachment_txt=<span class="string">'../data/start_urls.txt'</span>,</div><div class="line">              attachment_pdf=<span class="string">'../data/Gmail - How to add images in the product description_.pdf'</span>,</div><div class="line">              attachment_excel=<span class="string">'../data/shops.xlsx'</span>,</div><div class="line">              attachment_word=<span class="string">'../data/asdasd.docx'</span>)</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç®€è¿°ä¸‹å¦‚ä½•ä½¿ç”¨pythonå‘é€å„ç§é™„ä»¶çš„é‚®ä»¶ï¼Œæ¯”å¦‚wordã€excelã€pdfã€txtï¼Œä»¥åŠåœ¨æ­£æ–‡æ’å…¥å›¾ç‰‡ç­‰ç­‰&lt;br&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://frankchen.xyz/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>PyQt5 ç¼–å†™å¹¶åœ¨Windowsä¸Šç”¨Cx_Freezeæ‰“åŒ…GUIç¨‹åº</title>
    <link href="http://frankchen.xyz/2018/09/11/Pyqt5-GUI-package-on-Windows/"/>
    <id>http://frankchen.xyz/2018/09/11/Pyqt5-GUI-package-on-Windows/</id>
    <published>2018-09-11T14:51:05.000Z</published>
    <updated>2018-09-11T15:08:59.888Z</updated>
    
    <content type="html"><![CDATA[<p>ç®€è¿°ä¸‹å¦‚ä½•åœ¨Windowsä¸Šç”¨Cx_Freezeæ­£ç¡®æ‰“åŒ…GUIç¨‹åº<br><a id="more"></a></p><p>ä¸ºäº†é˜²æ­¢å‡ºç°&gt; This application failed to start because it could not find or load the Qt platform plugin â€œwindowsâ€ é”™è¯¯ï¼Œå¦‚<a href="https://pythonexample.com/code/cx_freeze-pyqt5" target="_blank" rel="external">Cx_Freeze Pyqt5 - pythonexample.com</a>è¿™é‡Œç®€è¿°çš„ï¼Œæˆ‘ä»¬éœ€è¦PyQt5çš„åº“ä½ç½®</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">from</span> cx_Freeze <span class="keyword">import</span> setup, Executable</div><div class="line"></div><div class="line">path_platforms = ( <span class="string">"C:\\Users\\zhaon\\Anaconda3\\pkgs\\qt-5.9.5-vc14he4a7d60_0\\Library\\plugins\\platforms\\qwindows.dll"</span>, <span class="string">"platforms\qwindows.dll"</span> )</div><div class="line">includefiles = [path_platforms]</div><div class="line"><span class="comment"># Dependencies are automatically detected, but it might need fine tuning.</span></div><div class="line">build_exe_options = &#123;<span class="string">"packages"</span>: [<span class="string">"os"</span>],</div><div class="line">                     <span class="string">"excludes"</span>: [<span class="string">"tkinter"</span>],</div><div class="line">                     <span class="string">"include_files"</span>: includefiles,&#125;</div><div class="line"></div><div class="line"><span class="comment"># GUI applications require a different base on Windows (the default is for a</span></div><div class="line"><span class="comment"># console application).</span></div><div class="line">base = <span class="keyword">None</span></div><div class="line"><span class="keyword">if</span> sys.platform == <span class="string">"win64"</span>:</div><div class="line">    base = <span class="string">"Win64GUI"</span></div><div class="line"></div><div class="line">setup(name=<span class="string">"QuickJump"</span>,</div><div class="line">      version=<span class="string">"0.9"</span>,</div><div class="line">      description=<span class="string">"application!"</span>,</div><div class="line">      options=&#123;<span class="string">"build_exe"</span>: build_exe_options&#125;,</div><div class="line">      executables=[Executable(<span class="string">"app.py"</span>, base=base)])</div></pre></td></tr></table></figure><p>å†<code>python setup.py bdist_msi</code>å³å¯æ‰“åŒ…msiå®‰è£…åŒ…ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç®€è¿°ä¸‹å¦‚ä½•åœ¨Windowsä¸Šç”¨Cx_Freezeæ­£ç¡®æ‰“åŒ…GUIç¨‹åº&lt;br&gt;
    
    </summary>
    
    
      <category term="PyQt5" scheme="http://frankchen.xyz/tags/PyQt5/"/>
    
  </entry>
  
  <entry>
    <title>å‘ç‰¹æœ—æ™®åŒå¿—å­¦ä¹ </title>
    <link href="http://frankchen.xyz/2018/08/22/learning-from-donald-trump/"/>
    <id>http://frankchen.xyz/2018/08/22/learning-from-donald-trump/</id>
    <published>2018-08-22T07:13:41.000Z</published>
    <updated>2018-08-22T11:55:46.284Z</updated>
    
    <content type="html"><![CDATA[<p><img src="../images/15349380614206.jpg" alt=""></p><p>ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å‘ç‰¹æœ—æ™®åŒå¿—å­¦ä¹ å‘¢ï¼Ÿå½“ç„¶æ˜¯å› ä¸ºç‰¹æœ—æ™®æ˜¯ä¸€ä¸ªå€¼å¾—æˆ‘ä»¬å­¦ä¹ çš„äººï¼Œç‰¹æœ—æ™®æ˜¯ä¸€ä¸ªç‰›é€¼çš„äººï¼Œæ˜¯ä»¥å•†äººèº«ä»½å´›èµ·åœ¨çŸ­çŸ­20å¹´æ—¶é—´é‡Œç§¯ç´¯äº†æ•°åäº¿ç¾å…ƒçš„è´¢å¯Œï¼Œæ›¾è¢«ç¾å›½äººå¥‰ä¸ºå®Œç¾çš„åŒ–èº«ï¼Œå¦‚ä»Šç‰¹æœ—æ™®åˆäº2017å¹´ä»¥71å²é«˜é¾„å–å¾—è¿™ä¸ªä¸–ç•Œä¸Šæœ€é‡è¦çš„æ”¿æ²»èŒä½ï¼šPresident of the United Statesã€‚ç‰¹æœ—æ™®ç²¾æ˜å¼ºç¡¬åˆçµæ´»è¿‡äººï¼Œåœ¨é˜…è¯»ç‰¹æœ—æ™®çš„è‘—ä½œæ—¶æˆ‘å¯¹ä»–æ›´åŠ äº§ç”Ÿå¥½æ„Ÿå’Œå…´è¶£ï¼Œäºæ˜¯å†³å®šå…ˆæ²¿ç€ç‰¹æœ—æ™®çš„ç”Ÿå¹³ã€è‘—ä½œç­‰é€æ¸å®Œæˆæœ¬ç¯‡ï¼Œä¹Ÿå°±æ˜¯è¿™æ®µæ—¶é—´æˆ‘è®¤ä¸ºæ˜¯è‡ªå·±è¿‘æœŸæœ€é‡è¦çš„ç ”ç©¶ã€‚<br><a id="more"></a></p><h2 id="ç‰¹æœ—æ™®è‘—ä½œ"><a href="#ç‰¹æœ—æ™®è‘—ä½œ" class="headerlink" title="ç‰¹æœ—æ™®è‘—ä½œ"></a>ç‰¹æœ—æ™®è‘—ä½œ</h2><p>åšç”Ÿæ„çš„è‰ºæœ¯ï¼ˆTrump: The Art of the Dealï¼‰æ­£åœ¨çœ‹<br>æ°¸ä¸æ”¾å¼ƒï¼šç‰¹æœ—æ™®è‡ªè¿°ï¼ˆNever Give Up: How I Turned My Biggest Challenges into Successï¼‰çœ‹å®Œ</p><h2 id="ç‰¹æœ—æ™®ç»¼è‰ºï¼ˆé£é»„è…¾è¾¾ï¼‰"><a href="#ç‰¹æœ—æ™®ç»¼è‰ºï¼ˆé£é»„è…¾è¾¾ï¼‰" class="headerlink" title="ç‰¹æœ—æ™®ç»¼è‰ºï¼ˆé£é»„è…¾è¾¾ï¼‰"></a>ç‰¹æœ—æ™®ç»¼è‰ºï¼ˆé£é»„è…¾è¾¾ï¼‰</h2><p>æœªå®Œå¾…ç»­</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;../images/15349380614206.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸ºä»€ä¹ˆæˆ‘ä»¬è¦å‘ç‰¹æœ—æ™®åŒå¿—å­¦ä¹ å‘¢ï¼Ÿå½“ç„¶æ˜¯å› ä¸ºç‰¹æœ—æ™®æ˜¯ä¸€ä¸ªå€¼å¾—æˆ‘ä»¬å­¦ä¹ çš„äººï¼Œç‰¹æœ—æ™®æ˜¯ä¸€ä¸ªç‰›é€¼çš„äººï¼Œæ˜¯ä»¥å•†äººèº«ä»½å´›èµ·åœ¨çŸ­çŸ­20å¹´æ—¶é—´é‡Œç§¯ç´¯äº†æ•°åäº¿ç¾å…ƒçš„è´¢å¯Œï¼Œæ›¾è¢«ç¾å›½äººå¥‰ä¸ºå®Œç¾çš„åŒ–èº«ï¼Œå¦‚ä»Šç‰¹æœ—æ™®åˆäº2017å¹´ä»¥71å²é«˜é¾„å–å¾—è¿™ä¸ªä¸–ç•Œä¸Šæœ€é‡è¦çš„æ”¿æ²»èŒä½ï¼šPresident of the United Statesã€‚ç‰¹æœ—æ™®ç²¾æ˜å¼ºç¡¬åˆçµæ´»è¿‡äººï¼Œåœ¨é˜…è¯»ç‰¹æœ—æ™®çš„è‘—ä½œæ—¶æˆ‘å¯¹ä»–æ›´åŠ äº§ç”Ÿå¥½æ„Ÿå’Œå…´è¶£ï¼Œäºæ˜¯å†³å®šå…ˆæ²¿ç€ç‰¹æœ—æ™®çš„ç”Ÿå¹³ã€è‘—ä½œç­‰é€æ¸å®Œæˆæœ¬ç¯‡ï¼Œä¹Ÿå°±æ˜¯è¿™æ®µæ—¶é—´æˆ‘è®¤ä¸ºæ˜¯è‡ªå·±è¿‘æœŸæœ€é‡è¦çš„ç ”ç©¶ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="chicken-soup" scheme="http://frankchen.xyz/tags/chicken-soup/"/>
    
  </entry>
  
  <entry>
    <title>Numpyä¸­çš„mask</title>
    <link href="http://frankchen.xyz/2018/07/20/numpy-mask/"/>
    <id>http://frankchen.xyz/2018/07/20/numpy-mask/</id>
    <published>2018-07-20T08:48:48.000Z</published>
    <updated>2018-07-20T09:03:43.000Z</updated>
    
    <content type="html"><![CDATA[<p>numpyä¸­çŸ©é˜µé€‰å–å­é›†æˆ–è€…ä»¥æ¡ä»¶æ›¿æ¢ï¼Œç”¨maskæ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹æ³•<br><a id="more"></a><br>ç®€å•æ¥è¯´å°±æ˜¯ç”¨boolç±»å‹çš„indiceçŸ©é˜µå»é€‰æ‹©ï¼Œ<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">mask = np.ones(X.shape[<span class="number">0</span>], dtype=bool)</div><div class="line">X[mask].shape</div><div class="line">mask.shape</div><div class="line">mask[indices[<span class="number">0</span>]] = <span class="keyword">False</span></div><div class="line">mask.shape</div><div class="line">X[mask].shape</div><div class="line">X[~mask].shape</div><div class="line">(<span class="number">678</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">678</span>,)</div><div class="line">(<span class="number">678</span>,)</div><div class="line">(<span class="number">675</span>, <span class="number">2</span>)</div><div class="line">(<span class="number">3</span>, <span class="number">2</span>)</div></pre></td></tr></table></figure></p><p>ä¾‹å¦‚æˆ‘ä»¬è¿™é‡Œç”¨æ¥é€‰å–å…¨éƒ¨ç‚¹ä¸­KNNé€‰å–çš„ç‚¹ä»¥åŠæ‰€æœ‰å‰©ä½™çš„ç‚¹<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn.neighbors <span class="keyword">import</span> NearestNeighbors</div><div class="line">nbrs = NearestNeighbors(<span class="number">10</span>).fit(X)</div><div class="line">_,indices = nbrs.kneighbors(X)</div><div class="line">mask = np.ones(X.shape[<span class="number">0</span>], dtype=bool)</div><div class="line">mask[indices[<span class="number">0</span>]] = <span class="keyword">False</span></div><div class="line">plt.scatter(X[mask][:,<span class="number">0</span>],X[mask][:,<span class="number">1</span>],c=<span class="string">'g'</span>)</div><div class="line">plt.scatter(X[~mask][:,<span class="number">0</span>],X[~mask][:,<span class="number">1</span>],c=<span class="string">'r'</span>)</div></pre></td></tr></table></figure></p><p><img src="/images/15320771581233.jpg" alt=""></p><p>å¸¦æ¡ä»¶é€‰æ‹©æ›¿æ¢ï¼Œæ¯”å¦‚æˆ‘ä»¬éœ€è¦å°†açŸ©é˜µå†…æŸæ¡ä»¶çš„è¡Œç½®æ¢ä¸º888å‰©ä½™ç½®æ¢ä¸º999ï¼Œå¯ä»¥ç›´æ¥ç”¨maskæˆ–è€…å†ç”¨whereä¸€æ­¥æå®šï¼š<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">mask = np.ones(a.shape,dtype=bool) <span class="comment">#np.ones_like(a,dtype=bool)</span></div><div class="line">mask[indices] = <span class="keyword">False</span></div><div class="line">a[~mask] = <span class="number">999</span></div><div class="line">a[mask] = <span class="number">888</span></div><div class="line"><span class="comment">#############</span></div><div class="line">np.where(mask, <span class="number">888</span>, <span class="number">999</span>)</div></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;numpyä¸­çŸ©é˜µé€‰å–å­é›†æˆ–è€…ä»¥æ¡ä»¶æ›¿æ¢ï¼Œç”¨maskæ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹æ³•&lt;br&gt;
    
    </summary>
    
    
      <category term="Numpy" scheme="http://frankchen.xyz/tags/Numpy/"/>
    
  </entry>
  
  <entry>
    <title>ä¸ºä»€ä¹ˆæˆ‘æ¯å¤©æ—©ä¸Š5:30èµ·åºŠ</title>
    <link href="http://frankchen.xyz/2018/07/19/Why-I-Wake-Up-at-5-30-am-Every-Morning-And-What-You-Will-Gain-From-Doing-It-Too/"/>
    <id>http://frankchen.xyz/2018/07/19/Why-I-Wake-Up-at-5-30-am-Every-Morning-And-What-You-Will-Gain-From-Doing-It-Too/</id>
    <published>2018-07-19T00:52:23.000Z</published>
    <updated>2018-07-19T01:31:24.000Z</updated>
    
    <content type="html"><![CDATA[<p>å‡ ä¸ªæœˆå‰ï¼Œæˆ‘åšå‡ºä¸€ä¸ªå¯¹æˆ‘æ¥è¯´å®Œå…¨ä¸åˆæ—¶å®œï¼Œå‡ ä¸ªæœˆå†…ä¼šäº§ç”Ÿæ—¥å¸¸å½±å“çš„å†³å®šã€‚</p><p>å†³å®šå°±æ˜¯åœ¨æ¯å¤©æ—©ä¸Š5:30é†’æ¥ã€‚</p><p><img src="/images/15319616493254.gif" alt=""><br><a id="more"></a></p><p>â€œä¸ºä»€ä¹ˆï¼Ÿâ€</p><p>è¿™æ˜¯ä¸€ä¸ªåˆç†çš„é—®é¢˜ã€‚ ï¼ˆæˆ‘å¿…é¡»æ‰¿è®¤ï¼Œæœ‰äº›æ—©æ™¨ï¼Œæˆ‘é—®è‡ªå·±åŒæ ·çš„é—®é¢˜ã€‚ï¼‰</p><p>ä½ æœ‰æ²¡æœ‰é†’è¿‡æ¥è§‰å¾—ä½ å®Œå…¨æ²¡æœ‰äº†ï¼Ÿä½ çå¼€çœ¼ç›ï¼Œä½ å°±ä¼šå› æ€¨æ¨è€Œæˆ˜èƒœã€‚ä½ ä¼šç«‹å³æƒ³è±¡ä½ æ— æƒ…çš„å¾…åŠäº‹é¡¹æ¸…å•ï¼Œä½ èƒŒåçš„ä¸€åˆ‡ï¼Œä»¥åŠæ‰€æœ‰å¿…é¡»è¾¾åˆ°çš„æœ€åæœŸé™ã€‚</p><p>ç»“æœï¼šæ¯å¤©æ—©ä¸Šé†’æ¥ï¼Œå¸Œæœ›ä½ å¯ä»¥åœ¨åºŠä¸Šåº¦è¿‡ä½™ä¸‹çš„ä¸€å¤©ã€‚</p><p>æˆ‘ä¸äº†è§£ä½ ï¼Œä½†åœ¨æˆ‘çš„ä½™ç”Ÿä¸­æ¯å¤©éƒ½å¼€å§‹è¿™æ ·åšï¼Ÿä¸ï¼Œè°¢è°¢ã€‚</p><p>ç„¶åæˆ‘å‘ç°äº†Hal Elrodçš„å¥‡è¿¹æ—©æ™¨ï¼Œä»¥åŠ<a href="http://uk.businessinsider.com/successful-tech-people-who-wake-up-reall-early-2015-8?r=US&amp;IR=T" target="_blank" rel="external">ä¸€äº›æœ€æˆåŠŸçš„ä¼ä¸šå®¶çš„æ—©æ™¨ä¾‹ç¨‹</a>ã€‚</p><p>å¦‚æœæˆåƒä¸Šä¸‡çš„The Miracle Morningç²‰ä¸ï¼Œä»¥åŠåƒRichard Bransonï¼ˆVirginçš„åˆ›å§‹äººå…¼é¦–å¸­æ‰§è¡Œå®˜ï¼‰ï¼ŒTim Cookï¼ˆAppleé¦–å¸­æ‰§è¡Œå®˜ï¼‰ï¼ŒHoward Schulzï¼ˆæ˜Ÿå·´å…‹é¦–å¸­æ‰§è¡Œå®˜ï¼‰å’ŒJack Dorseyï¼ˆTwitteråˆ›å§‹äººå…¼é¦–å¸­æ‰§è¡Œå®˜ï¼‰ç­‰äººå’Œå¹¿åœºï¼‰åŠªåŠ›åšåˆ°è¿™ä¸€ç‚¹ï¼Œå¿…é¡»æœ‰ä¸€äº›ä¸œè¥¿ï¼Œå¯¹å§ï¼Ÿ</p><p>è¿™ä¸æ˜¯ä¸ºäº†åœ¨å¤ªé˜³ä¹‹å‰åœ¨5:30èµ·åºŠï¼ˆæˆ‘å–œæ¬¢æˆ‘çš„åºŠå’Œä¸‹ä¸€ä¸ªäººä¸€æ ·ï¼‰ã€‚è¿™æ˜¯å…³äºæœ‰æ—¶é—´å®Œæˆæ´»åŠ¨ï¼Œè¿™äº›æ´»åŠ¨å·²çŸ¥ä¼šå¯¹æˆ‘ä»¬çš„å¿ƒç†çŠ¶æ€ï¼Œæ•ˆç‡å’Œï¼ˆé¡ºä¾¿æä¸€ä¸‹ï¼‰æˆ‘ä»¬çš„å¹¸ç¦æ°´å¹³äº§ç”Ÿç›¸å½“ç§¯æçš„å½±å“ã€‚</p><p>å¦‚æœä»¥çƒ­æƒ…çš„çƒ­æƒ…å¼€å§‹æ–°çš„ä¸€å¤©ï¼Œå¹¶ä¸”æƒ³è¦å……åˆ†åˆ©ç”¨å®ƒçš„æƒ³æ³•å¸å¼•ä½ ï¼Œè¿™å°±æ˜¯æˆ‘é‡‡ç”¨çš„æƒ¯ä¾‹ï¼Œå¾ˆå¤§ç¨‹åº¦ä¸Šå—åˆ°äº†å“ˆå°”Â·åŸƒå°”ç½—å¾·åœ¨â€œå¥‡è¿¹æ—©æ™¨â€ä¸­æå‡ºçš„å»ºè®®çš„å¯å‘ã€‚<br>ï¼ˆé‡è¦æç¤ºï¼šæ—©ä¸Š5ç‚¹åŠé†’æ¥å¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚ä¸ºäº†æœ‰æ—¶é—´è¿›è¡Œè¿™äº›æ´»åŠ¨ï¼Œåªéœ€è¦æ¯”å¹³å¸¸æ—©èµ·æ¥å°±è¶³å¤Ÿäº†ã€‚</p><h2 id="æ¸…é†’ä½ çš„æ€æƒ³å’Œä¸“å¿ƒ"><a href="#æ¸…é†’ä½ çš„æ€æƒ³å’Œä¸“å¿ƒ" class="headerlink" title="æ¸…é†’ä½ çš„æ€æƒ³å’Œä¸“å¿ƒ"></a>æ¸…é†’ä½ çš„æ€æƒ³å’Œä¸“å¿ƒ</h2><p>æˆ‘ä»¬å³å°†è°ˆè®ºå†¥æƒ³ã€‚å…³äºå†¥æƒ³ç›Šå¤„çš„ç§‘å­¦è¯æ®æ­£åœ¨å¢é•¿ã€‚</p><p>å†¥æƒ³ä¸ä¸€å®šæ˜¯ç›˜è…¿ååœ¨åœ°æ¿ä¸Šæ•´æ•´ä¸€ä¸ªå°æ—¶ã€‚ç»å¸¸ç»ƒä¹ äº”åˆ†é’Ÿçš„å†¥æƒ³ä¼šç»™ä½ åŒæ ·çš„å¥½å¤„ã€‚</p><p>æˆ‘æµ‹è¯•äº†ä¸¤ä¸ªå¯ä»¥åœ¨ä¸€å¼€å§‹å°±æŒ‡å¯¼æ‚¨çš„åº”ç”¨ç¨‹åºï¼š</p><ul><li>Headspaceï¼ˆæ— å¯æŒ‘å‰”çš„ç”¨æˆ·ä½“éªŒè®¾è®¡ï¼ï¼‰</li><li>Calmï¼ˆæˆ‘ç›®å‰ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆï¼‰</li></ul><p>åœ¨The Miracle Morningä¸­ï¼ŒHal Elrodç»™å‡ºäº†ä¸€ä¸ªç®€å•çš„æŠ€å·§ï¼š</p><ul><li>æ‰¾ä¸€ä¸ªèˆ’é€‚çš„åœ°æ–¹ï¼Œåç›´ã€‚</li><li>é—­ä¸Šçœ¼ç›æˆ–ç›¯ç€ä½ é¢å‰çš„å›ºå®šç‚¹ã€‚</li><li>ä¸“æ³¨äºä½ çš„å‘¼å¸;ä»ä½ çš„è…¹éƒ¨å¸æ°”ï¼Œé€šè¿‡èƒ¸éƒ¨å‘¼æ°”ã€‚</li><li>æ¬£èµå¹³é™;å°½é‡ä¸“æ³¨äºä½ çš„å‘¼å¸ï¼Œä¸è¦æƒ³å…¶ä»–ä»»ä½•äº‹æƒ…ã€‚å½“ä½ çš„æ€ç»ªå¾˜å¾Šåˆ°æµæµªçš„æ€ç»ªæ—¶ï¼Œä¸è¦æƒŠæ…Œå¤±æªï¼Œå¹³é™åœ°å°†ä½ çš„ç„¦ç‚¹å¸å›ä½ çš„å‘¼å¸ã€‚<br>ä¼˜ç‚¹ï¼š</li></ul><p>ä½ æ„Ÿåˆ°å‹åŠ›å‡è½»ï¼Œä½ è·å¾—äº†å®‰å¿ƒã€‚ç»è¿‡ä¸€äº›ç»ƒä¹ ï¼Œä¸€æ—¦ä½ åœ¨é‚£10åˆ†é’Ÿåé‡æ–°çå¼€çœ¼ç›ï¼Œä½ ä¼šçœŸæ­£æ„Ÿè§‰åˆ°ä½ å¤„äºä¸åŒçš„å¿ƒæ€ã€‚</p><h2 id="å†™"><a href="#å†™" class="headerlink" title="å†™"></a>å†™</h2><p>æ¯å¤©æ—©ä¸ŠèŠ±ç‚¹æ—¶é—´å†™å‡ åˆ†é’Ÿï¼ŒçœŸçš„å¯ä»¥å¸®åˆ°ä½ ã€‚å®ƒå…è®¸æ‚¨è¯„ä¼°æ‚¨çš„å½“å‰çŠ¶æ€ï¼Œå¹¶é‡æ–°å…³æ³¨é‡è¦çš„äº‹æƒ…ã€‚</p><p>ä½ å¯ä»¥ï¼Œä¾‹å¦‚ï¼š</p><ul><li>å†™ä¸‹ä½ æ„Ÿæ©çš„ä¸‰ä»¶äº‹ï¼šäº²å¯†çš„æœ‹å‹å’Œå®¶äººï¼Œä¸€äº›å¥½æ¶ˆæ¯ï¼Œç¾å¥½çš„å›å¿†æˆ–æˆå°±ã€‚</li><li>å†™ä¸‹ä½ å½“æ—¶çš„æƒ³æ³•ã€‚</li><li>å†™ä¸‹ä½ æƒ³åœ¨ç™½å¤©å®Œæˆçš„ä¸€åˆ‡ã€‚</li><li>å†™ä¸‹ä¸€æ¡æ¿€åŠ±ä½ æˆ–ä½ æƒ³è¦è®°ä½çš„å¼•è¯­ã€‚</li><li>è®°ä¸‹ä½ æœ€è¿‘å­¦åˆ°çš„ä¸€ä»¶äº‹æˆ–è€…ä½ æœ‰ä¸€ä¸ªé¡¿æ‚Ÿã€‚</li><li>ä¸€å¼€å§‹æˆ‘æ›¾ç»å†™è¿‡ä¸€ä¸ªç©ºç™½çš„Moleskineç¬”è®°æœ¬ã€‚ç„¶åæˆ‘ä½¿ç”¨äº†ä¸€ç§ç‰¹æ®Šçš„æ—¥è®°ï¼ˆä¸æ˜¯é‚£äº›14å²å°å­©ç”¨çš„å°å¿ƒè„çš„æ—¥è®°ï¼‰ã€‚ä»Šå¤©ï¼Œæˆ‘æ­£åœ¨åˆ¶ä½œè‡ªå·±çš„æœŸåˆŠã€‚å®ƒå°†æœ‰ä¸€ä¸ªç‰¹æ®Šçš„å¸ƒå±€ï¼Œæˆ‘å¯ä»¥å›ç­”é¢„å®šä¹‰çš„æ¯æ—¥é—®é¢˜ã€‚</li></ul><p>ä¼˜ç‚¹ï¼š</p><p>ä½ ä¼šæ„Ÿåˆ°æ›´å¿«ä¹ï¼Œæ›´ä¸“æ³¨ã€‚åšè¿™ä¸ªç»ƒä¹ ä¹Ÿå¯ä»¥å¸®åŠ©ä½ è®°å½•ä½ çš„è¿›æ­¥ï¼Œä»¥åŠä½ ç”Ÿæ´»ä¸­æ‰€æœ‰ç§¯æçš„äº‹æƒ…ã€‚</p><h2 id="æé†’è‡ªå·±ä½ çš„ç›®æ ‡"><a href="#æé†’è‡ªå·±ä½ çš„ç›®æ ‡" class="headerlink" title="æé†’è‡ªå·±ä½ çš„ç›®æ ‡"></a>æé†’è‡ªå·±ä½ çš„ç›®æ ‡</h2><p>æœ‰å‡ ç§æ–¹æ³•å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹ã€‚æ‚¨å¯ä»¥é€‰æ‹©å…¶ä¸­ä¹‹ä¸€æˆ–ä¸‰è€…çš„ç»„åˆã€‚</p><ul><li>èª“è¯ã€‚è¿™äº›æ˜¯å¯é‡å¤çš„çŸ­è¯­ï¼Œæè¿°äº†æ‚¨æƒ³æˆä¸ºçš„äººã€‚</li><li>å¯è§†åŒ–ã€‚æƒ³è±¡ä¸€ä¸‹è‡ªå·±æ­£åœ¨å®Œæˆä½ æƒ³è¦å®Œæˆçš„äº‹æƒ…ï¼Œäº«å—ç¾å¥½çš„ä¸€å¤©ã€‚æƒ³è±¡å¹¶æƒ³è±¡æ‚¨å°†ä½“éªŒåˆ°çš„æ„Ÿå—ã€‚</li><li>æé†’ç›®æ ‡ã€‚è¿™æ˜¯æŠ½å‡ºæˆ‘ä»¬ä¹‹å‰è®¨è®ºè¿‡çš„æ¯å‘¨å·¥ä½œè¡¨çš„æ—¶åˆ»ã€‚æ‚¨è¿˜å¯ä»¥èŠ±ç‚¹æ—¶é—´å†™ä¸‹æ‚¨çš„ç›®æ ‡å¹¶æé†’æ‚¨è‡ªå·±æƒ³è¦å®Œæˆå®ƒä»¬çš„åŸå› ã€‚ä¾‹å¦‚ï¼šâ€œä¸å®¶äººå…±åº¦ç¾å¥½çš„ä¸€å¤© - å› ä¸ºä»–ä»¬æ˜¯æˆ‘çš„é¦–è¦ä»»åŠ¡ã€‚â€<br>æˆ‘ç¬¬ä¸€æ¬¡å¬åˆ°è‚¯å®šå’Œå¯è§†åŒ–æ—¶çš„åˆæ­¥ååº”ï¼š<br>ï¼ˆèµ·åˆæˆ‘æœ‰ä¸€ç‚¹è‚¯å®šå’Œå¯è§†åŒ–æ–¹é¢æœ‰ç‚¹éº»çƒ¦ã€‚å½“ä½ æœ€åˆå¼€å§‹å°è¯•å®ƒä»¬æ—¶ï¼Œä½ ä¼šæ„Ÿè§‰åˆ°ä½ å·²ç»è½åœ¨å…¶ä¸­ä¸€ä¸ªç¾å›½å¤§ä¼šçš„ä¸­é—´ï¼Œåœ¨é‚£é‡Œæ¼”è®²è€…å‘Šè¯‰ä½ ä½ æ˜¯å¤šä¹ˆç¾å¦™ï¼Œä»¥åŠå¦‚ä½•æ”¹å˜ä¸–ç•Œâ€¦ä½†æœ€ç»ˆï¼Œæˆ‘å·²ç»ä¹ æƒ¯äº†ä»–ä»¬ã€‚ï¼‰</li></ul><h2 id="åŠ¨èµ·æ¥-ï¼"><a href="#åŠ¨èµ·æ¥-ï¼" class="headerlink" title="åŠ¨èµ·æ¥ ï¼"></a>åŠ¨èµ·æ¥ ï¼</h2><p>è¿™æ˜¯æˆ‘æ—¥å¸¸åŠ¨æœºçš„é•œå¤´ï¼å®ƒè®©æˆ‘æƒ³èµ·äº†æˆ‘æƒ³åšä»€ä¹ˆï¼Œä¸ºä»€ä¹ˆè¦è¿™æ ·åšï¼Œä»¥åŠæˆ‘å°†å¦‚ä½•å»åšã€‚</p><p>æˆåŠŸäººå£«ç»å¸¸é”»ç‚¼æ˜¯æœ‰åŸå› çš„ã€‚è¿™æ˜¯å› ä¸ºä»–ä»¬æ„è¯†åˆ°ä»–ä»¬éœ€è¦åœ¨æ¸¸æˆä¸­å¤„äºé¢†å…ˆåœ°ä½ï¼Œä»¥å®ç°ä»–ä»¬çš„ç›®æ ‡ï¼Œå¹¶ä¸”æ¯å¤©éƒ½å……åˆ†å‘æŒ¥ä½œç”¨ã€‚</p><p>è’‚å§†åº“å…‹æ¯å¤©å‡Œæ™¨5ç‚¹å»å¥èº«æˆ¿ï¼Œæˆ–è€…æ°å…‹å¤šå°”è¥¿è·‘10å…¬é‡Œå¼€å§‹ä»–çš„ä¼‘æ¯æ—¥å¹¶ä¸å¥‡æ€ªã€‚</p><p>å¦‚æœæ‚¨æƒ³åœ¨æ²¡æœ‰è´­ä¹°ä»»ä½•è®¾å¤‡çš„æƒ…å†µä¸‹å¼€å§‹ï¼Œæ— éœ€åŠ å…¥å¥èº«æˆ¿ï¼Œä¹Ÿæ²¡æœ‰æ‰¿è¯ºï¼Œæ‚¨å¯ä»¥ä¸¾ä¾‹ï¼š</p><p>å»è·‘æ­¥ï¼Œå³ä½¿ä½ å¼€å§‹10-15åˆ†é’Ÿ<br>åšä¸€ä¸ªç€åçš„ä¸ƒåˆ†é’Ÿè®­ç»ƒï¼ˆä¾‹å¦‚è¿™ä¸ª -  <a href="https://itunes.apple.com/en/app/7-minute-workout/id650762525?mt=8ï¼‰" target="_blank" rel="external">https://itunes.apple.com/en/app/7-minute-workout/id650762525?mt=8ï¼‰</a></p><p>æ¯å¤©æ—©ä¸Šåšä¸€ç‚¹æ˜¯ç†æƒ³çš„ã€‚ä½†æˆ‘å‘ç°æœ€æœ‰ç”¨çš„æ˜¯æ¯éš”ä¸€ä¸ªæ—©æ™¨é”»ç‚¼ä¸€ä¸ªåŠå°æ—¶ã€‚å½“æˆ‘ä¸é”»ç‚¼æ—¶ï¼Œæˆ‘ä¼‘æ¯ã€‚æœ€åï¼Œå½“æˆ‘ä¸å»å¥èº«æˆ¿æ—¶ï¼Œæˆ‘å¸Œæœ›èƒ½å¤Ÿåš10åˆ†é’Ÿçš„ç‘œä¼½ã€‚</p><p>ä¼˜ç‚¹ï¼š</p><p>æ—©ä¸Šè¿›è¡ŒæŸç§å½¢å¼çš„èº«ä½“æ´»åŠ¨ï¼Œå³ä½¿åªè¿›è¡Œ10åˆ†é’Ÿçš„è¿åŠ¨ï¼Œä¹Ÿå¯ä»¥è®©ä½ å®Œå…¨é†’æ¥ï¼Œæ”¾æ¾å‹åŠ›ï¼Œå……æ»¡æ´»åŠ›ã€‚å“¦æ˜¯çš„ï¼Œå®ƒä¹Ÿå¾ˆå¥åº·ã€‚éå¸¸å¥½ï¼Œå¯¹å§</p><h2 id="è¯»"><a href="#è¯»" class="headerlink" title="è¯»"></a>è¯»</h2><p>æ‚¨å¯ä»¥éšæ„ä½¿ç”¨æ— é™çš„çŸ¥è¯†æ¥æºï¼šä¹¦ç±ã€‚æ— è®ºä½ æƒ³è¦å®Œæˆä»€ä¹ˆï¼šè·‘é©¬æ‹‰æ¾ï¼Œè‡´å¯Œï¼Œç¯æ¸¸ä¸–ç•Œâ€¦â€¦æœ‰å…³äºè¿™ä¸ªä¸»é¢˜çš„ä¹¦ç±å¯ä»¥æä¾›ç›¸å½“å¤§çš„å¸®åŠ©ã€‚</p><p>æ¯å¤©æ—©ä¸Šé˜…è¯»20åˆ†é’Ÿï¼ˆç”šè‡³10åˆ†é’Ÿï¼‰æ„å‘³ç€å¸æ”¶çŸ¥è¯†ï¼Œä½ å¯ä»¥ç«‹å³ä»˜è¯¸å®è·µï¼Œæ›´æ¥è¿‘å®ç°ç›®æ ‡ã€‚</p><p>æˆ‘ç»å¸¸å†™ä¸€äº›å¯¹æˆ‘æ¥è¯´æœ€æœ‰ç”¨çš„ä¹¦ç±æ‘˜è¦ã€‚</p><p>ä¸€äº›å¯¹æˆ‘äº§ç”ŸçœŸæ­£å½±å“çš„ä¹¦ç±çš„ä¾‹å­ï¼š</p><ul><li>Tim Ferrisçš„The 4-Hour Workweekï¼ˆé˜…è¯»å®ƒä»¥å¤§å¤§æé«˜æ‚¨çš„å·¥ä½œæ•ˆç‡ï¼‰</li><li>Dale Carnegie çš„How to Win Friends and Influence People ï¼ˆæ— ç–‘æ˜¯å…³äºäººé™…äº¤å¾€å’Œæƒ…å•†çš„æœ€ä½³ç°å­˜ä¹¦ç±ï¼‰</li><li>Chris Guillebeauçš„The100 Startupï¼ˆå‘æ‚¨å±•ç¤ºå¦‚ä½•åœ¨è¿½æ±‚æ¿€æƒ…çš„åŒæ—¶è·å¾—è‰¯å¥½çš„ç”Ÿæ´»ï¼‰</li><li>The Power of Lessï¼šå°†è‡ªå·±é™åˆ¶åœ¨å•†ä¸šå’Œç”Ÿæ´»ä¸­å¿…ä¸å¯å°‘çš„ç¾æœ¯Leo Babautaï¼ˆæ•™ä½ æ¶ˆé™¤ä¸å¿…è¦çš„æ›´å¤šï¼‰</li></ul><p><strong>ğŸ˜ç«™é•¿æ¨èï¼šå¤–æ–‡åŸç‰ˆç”µå­ä¹¦æ¨èä¸‹è½½ç½‘ç«™<a href="http://gen.lib.rus.ec/" target="_blank" rel="external">Library Genesis</a></strong><br><img src="/images/15319638830117.jpg" alt=""></p><p>ä¼˜ç‚¹ï¼š</p><p>ä¸ºä»€ä¹ˆä¸ä»æˆåŠŸäººå£«çš„ç»éªŒä¸­å­¦ä¹ å‘¢ï¼Ÿä½ ä¼šèŠ‚çœå¾ˆå¤šæ—¶é—´ã€‚ä½ ä¼šä¸°å¯Œè‡ªå·±ã€‚é€šè¿‡åˆ†äº«æ‚¨å­¦åˆ°çš„æ‰€æœ‰çŸ¥è¯†ï¼Œæ‚¨å°†èƒ½å¤Ÿå¸®åŠ©èº«è¾¹çš„äººã€‚</p><p>æˆ‘å·²ç»ç»ƒä¹ äº†å‡ ä¸ªæœˆçš„è¿™ç§ä»ªå¼ï¼Œè¿™é‡Œæœ‰ä¸€äº›å¥½å¤„ï¼š</p><ul><li>æˆ‘ä»æœªè¯»è¿‡é‚£ä¹ˆå¤šï¼Œå› æ­¤å­¦åˆ°äº†å¾ˆå¤šä¸œè¥¿ï¼ ï¼ˆæˆ‘ä¹Ÿåœ¨æ—©æ™¨çš„ä»ªå¼ä¹‹å¤–é˜…è¯»ï¼‰</li><li>æˆ‘ï¼ˆæœ€ç»ˆï¼‰æˆåŠŸåœ°è‡´åŠ›äºå®šæœŸé”»ç‚¼ï¼ˆè¿™ä¸ªå¥‡è¿¹ä¸€ä¸‹ï¼‰</li><li>æˆ‘çŸ¥é“æˆ‘æƒ³å»å“ªé‡Œï¼Œä¸ºä»€ä¹ˆï¼ˆå³ä½¿â€œå¦‚ä½•â€ä»ç„¶å«ç³Šä¸æ¸…ï¼‰<br>é¡ºä¾¿è¯´ä¸€å¥ï¼Œæˆ‘åœ¨æ—©ä¸Š6:10å†™äº†è¿™ç¯‡æ–‡ç« ã€‚æˆ‘åˆšåˆšå®Œæˆäº†æ—©ä¸Šçš„ä»ªå¼ï¼Œæˆ‘å·²ç»å¼€å§‹å®Œæˆå½“å¤©çš„ç¬¬ä¸€é¡¹ä»»åŠ¡äº†ï¼šå†™è¿™ç¯‡æ–‡ç« ï¼</li></ul><p>æˆ‘åªèƒ½é¼“åŠ±ä½ ç»™è‡ªå·±æ¯å¤©å¼€å§‹çš„æœºä¼šï¼Œè€Œä¸æ˜¯è¿Ÿåˆ°å’Œå‹åŠ›ï¼Œä½†è¦ç…§é¡¾å¥½è‡ªå·±ï¼Œå……æ»¡åŠ¨åŠ›ï¼Œå¹¶å†³å¿ƒå……åˆ†åˆ©ç”¨æ¯ä¸€åˆ†é’Ÿã€‚</p><h2 id="ä½ çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼Œå¦‚æœä½ æ„¿æ„çš„è¯"><a href="#ä½ çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼Œå¦‚æœä½ æ„¿æ„çš„è¯" class="headerlink" title="ä½ çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼Œå¦‚æœä½ æ„¿æ„çš„è¯"></a>ä½ çš„å¾…åŠäº‹é¡¹åˆ—è¡¨ï¼Œå¦‚æœä½ æ„¿æ„çš„è¯</h2><ul><li>å¯¹äºä½ ä»¬ä¸­é—´çš„æ ¸å¿ƒï¼šæ˜å¤©æ—©ä¸Šæ¯”å¹³å¸¸æå‰ä¸€å°æ—¶è®¾ç½®ä½ çš„é—¹é’Ÿï¼Œå¹¶ä¸”æ¯æ¬¡è¿™äº›æ´»åŠ¨éƒ½è¦åš10åˆ†é’Ÿã€‚</li><li>å¯¹äºé‚£äº›å–œæ¬¢æ…¢æ…¢åšçš„äººï¼šé€‰æ‹©ä¸¤ä¸‰ä¸ªå¯¹ä½ æœ‰å¸å¼•åŠ›çš„ä»»åŠ¡ï¼Œå¹¶æ˜å¤©æ—©ä¸Šå¼€å§‹åšã€‚</li><li>ä»–ä»¬è¯´ï¼Œä¸ºäº†åœ¨ä½ çš„ç”Ÿæ´»ä¸­å»ºç«‹ä¸€ä¸ªæ–°çš„ä¹ æƒ¯ï¼Œä½ å¿…é¡»é€šè¿‡â€œ21å¤©å¤§å…³ã€‚â€å¦‚æœä½ æƒ³å†’é™©ï¼Œä½ çŸ¥é“ä½ å¿…é¡»åšä»€ä¹ˆã€‚</li></ul><h2 id="è¯‘è€…çš„è¯"><a href="#è¯‘è€…çš„è¯" class="headerlink" title="è¯‘è€…çš„è¯"></a>è¯‘è€…çš„è¯</h2><p>æˆ‘å°è¯•äº†è®¸å¤šä¼ è¯´ä¸­å¯¹äºæ—©æœŸæœ‰å¸®åŠ©çš„APPï¼Œè®¸å¤šçš„ç†å¿µåŸºäºå¼ºåˆ¶æ€§çš„è®©ä½ åšä¸€äº›åŠ¨ä½œï¼ˆæ¯”å¦‚å¼ºè¿«æ‰«ç ä½ çš„ç‰™è†ï¼‰æ¥æ¶ˆé™¤ä½ çš„ç¡æ„ï¼Œä¸è¿‡æˆ‘è®¤ä¸ºè¿™ç§ç†å¿µæœ¬æ¥å°±æ˜¯ä¸å¯¹çš„ï¼Œæƒ¹æ€¥äº†ç”¨æˆ·è¦ç¡åˆ äº†APPä¸å°±è¡Œäº†ï¼Ÿï¼ğŸ˜‚<br>ç°åœ¨æˆ‘ç”¨çš„æ„Ÿè§‰å¾ˆæˆåŠŸçš„ä¸€æ¬¾APPå«åš<a href="https://www.sleepcycle.com/" target="_blank" rel="external">Sleep Cycle alarm clock</a>ï¼ŒåŸºäºåœ¨ä½ æµ…ç¡çœ çš„æ—¶å€™å«é†’çš„è¿™ä¸ªç†å¿µï¼Œä¿è¯é—¹é“ƒå“èµ·çš„æ—¶å€™èµ·åºŠæ¦‚ç‡è¶…é«˜ï¼<br>æ¯”å¦‚ä¸‹å›¾ï¼Œæˆ‘å®šäº†5ï¼š30çš„é—¹é’Ÿï¼Œé‚£ä¹ˆAPPä¼šæ¢æµ‹æˆ‘åœ¨5ï¼š00~5ï¼š30ä¹‹é—´çš„ä¸€ä¸ªæµ…ç¡çœ æ—¶åˆ»å«é†’æˆ‘ã€‚<br><img src="/images/15319625280582.jpg" alt=""></p><h2 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h2><p><a href="https://www.huffingtonpost.com/entry/why-i-wake-up-at-530-am-e_b_8055880" target="_blank" rel="external">Why I Wake Up at 5:30 am Every Morning (And What You Will Gain From Doing It Too) | HuffPost</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;å‡ ä¸ªæœˆå‰ï¼Œæˆ‘åšå‡ºä¸€ä¸ªå¯¹æˆ‘æ¥è¯´å®Œå…¨ä¸åˆæ—¶å®œï¼Œå‡ ä¸ªæœˆå†…ä¼šäº§ç”Ÿæ—¥å¸¸å½±å“çš„å†³å®šã€‚&lt;/p&gt;
&lt;p&gt;å†³å®šå°±æ˜¯åœ¨æ¯å¤©æ—©ä¸Š5:30é†’æ¥ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/images/15319616493254.gif&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="chicken-soup" scheme="http://frankchen.xyz/tags/chicken-soup/"/>
    
  </entry>
  
  <entry>
    <title>Datacamp Git ç¬”è®°</title>
    <link href="http://frankchen.xyz/2018/07/13/Datacamp-Git-Nones/"/>
    <id>http://frankchen.xyz/2018/07/13/Datacamp-Git-Nones/</id>
    <published>2018-07-13T09:14:07.000Z</published>
    <updated>2018-07-19T03:35:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘å…¥äº†<a href="https://item.taobao.com/item.htm?spm=a1z09.2.0.0.11752e8diqYgI7&amp;id=565426495436&amp;_u=dn2i5bf6736" target="_blank" rel="external">elecomI Padè´´è†œ</a>åç”¨iPadå†™å­—æ„Ÿè§‰è¶…æ£’ï¼ğŸ±<br>è¿™é‡Œæ˜¯ä¸€æ®µDataCampä¸Šçš„Gitè¯¾ç¨‹çš„ç¬”è®°ï¼Œå½“ç„¶è¿™æ˜¯å…è´¹è¯¾ç¨‹ï¼Œå…¶å®æˆ‘é¢†å–<a href="http://www.10tiao.com/html/407/201801/2650545581/1.html" target="_blank" rel="external">å¾®è½¯é€çš„çš„ä¸¤æœˆDataCampä¼šå‘˜</a>è¿‡æœŸäº†ã€‚ã€‚ã€‚ğŸ˜¡<br><a id="more"></a><br>è¿™å°±æ˜¯[elecomI çš„Padè´´è†œ]<br><img src="/images/15319713559370.jpg" alt=""></p><p><img src="/images/IMG_0150.png" alt="IMG_0150"><br><img src="/images/IMG_0151.png" alt="IMG_0151"></p><p>åç»­æœ‰æ›´æ–°å†è¡¥å……~</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘å…¥äº†&lt;a href=&quot;https://item.taobao.com/item.htm?spm=a1z09.2.0.0.11752e8diqYgI7&amp;amp;id=565426495436&amp;amp;_u=dn2i5bf6736&quot;&gt;elecomI Padè´´è†œ&lt;/a&gt;åç”¨iPadå†™å­—æ„Ÿè§‰è¶…æ£’ï¼ğŸ±&lt;br&gt;è¿™é‡Œæ˜¯ä¸€æ®µDataCampä¸Šçš„Gitè¯¾ç¨‹çš„ç¬”è®°ï¼Œå½“ç„¶è¿™æ˜¯å…è´¹è¯¾ç¨‹ï¼Œå…¶å®æˆ‘é¢†å–&lt;a href=&quot;http://www.10tiao.com/html/407/201801/2650545581/1.html&quot;&gt;å¾®è½¯é€çš„çš„ä¸¤æœˆDataCampä¼šå‘˜&lt;/a&gt;è¿‡æœŸäº†ã€‚ã€‚ã€‚ğŸ˜¡&lt;br&gt;
    
    </summary>
    
    
      <category term="git" scheme="http://frankchen.xyz/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨Linuxä¸Šé‡æ–°æ˜ å°„Winï¼ŒCtrlå’ŒAlté”®</title>
    <link href="http://frankchen.xyz/2018/07/12/remap-win-ctrl-and-alt-keys-on-linux/"/>
    <id>http://frankchen.xyz/2018/07/12/remap-win-ctrl-and-alt-keys-on-linux/</id>
    <published>2018-07-12T08:43:42.000Z</published>
    <updated>2018-07-12T08:54:35.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç”¨æƒ¯äº†Macä¸Šçš„CMD + * ç­‰æ“ä½œï¼Œå°±ä¹ æƒ¯äº†å·¦æ‰‹å¤§æ‹‡æŒ‡è¿™ä¸ªç»„åˆé”®æ“ä½œäº†ï¼Œåˆ‡æ¢åˆ°Linuxä¸Šå¿…é¡»è¦Ctrlå„ç§å°æŒ‡ä¸èˆ’æœã€‚ã€‚ã€‚å€¼å¾—ä¸€æçš„æ˜¯Macä¸Šå·¦ä¾§æŒ‰é”®é¡ºåºæ˜¯controlã€alt/optionã€commandï¼ŒUbuntuåˆ™æ˜¯controlã€superã€altï¼ŒWindowsåˆ™æ˜¯controlã€Winã€altã€‚è¿™é‡Œæˆ‘ä»¬æ–¹ä¾¿Macç”¨æˆ·èµ·è§ï¼Œå°±æŠŠUbuntuçš„controlã€superã€altæ˜ å°„ä¸ºsuperã€altã€control</p><a id="more"></a><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">vim ~/.Xmodmap</div><div class="line"></div><div class="line">clear control</div><div class="line">clear mod1</div><div class="line">clear mod4</div><div class="line"></div><div class="line"></div><div class="line">keycode 37  = Super_L     </div><div class="line">! left  Ctrl becomes Super</div><div class="line">keycode 64  = Control_L</div><div class="line">! left  Alt  becomes Control </div><div class="line">keycode 133 = Alt_L Meta_L</div><div class="line">! left  W<span class="keyword">in</span>  becomes Alt</div><div class="line">keycode 108 = Control_R</div><div class="line">! right Alt  becomes Control </div><div class="line">keycode 134 = Alt_R Meta_R</div><div class="line">! right W<span class="keyword">in</span>  becomes Alt</div><div class="line">keycode 105 = Super_R</div><div class="line">! right Ctrl becomes Super</div><div class="line"></div><div class="line"></div><div class="line">add control = Control_L Control_R</div><div class="line">add mod1 = Alt_L Meta_L</div><div class="line">add mod4 = Super_L Super_R</div></pre></td></tr></table></figure><p>å†<code>xmodmap ~/.Xmodmap</code>å³å¯ï¼</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç”¨æƒ¯äº†Macä¸Šçš„CMD + * ç­‰æ“ä½œï¼Œå°±ä¹ æƒ¯äº†å·¦æ‰‹å¤§æ‹‡æŒ‡è¿™ä¸ªç»„åˆé”®æ“ä½œäº†ï¼Œåˆ‡æ¢åˆ°Linuxä¸Šå¿…é¡»è¦Ctrlå„ç§å°æŒ‡ä¸èˆ’æœã€‚ã€‚ã€‚å€¼å¾—ä¸€æçš„æ˜¯Macä¸Šå·¦ä¾§æŒ‰é”®é¡ºåºæ˜¯controlã€alt/optionã€commandï¼ŒUbuntuåˆ™æ˜¯controlã€superã€altï¼ŒWindowsåˆ™æ˜¯controlã€Winã€altã€‚è¿™é‡Œæˆ‘ä»¬æ–¹ä¾¿Macç”¨æˆ·èµ·è§ï¼Œå°±æŠŠUbuntuçš„controlã€superã€altæ˜ å°„ä¸ºsuperã€altã€control&lt;/p&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="http://frankchen.xyz/tags/Linux/"/>
    
  </entry>
  
  <entry>
    <title>Mac åŒå¼€ ss æ–¹æ³•</title>
    <link href="http://frankchen.xyz/2018/05/31/dual-ss-on-mac/"/>
    <id>http://frankchen.xyz/2018/05/31/dual-ss-on-mac/</id>
    <published>2018-05-31T11:24:17.000Z</published>
    <updated>2018-07-12T09:25:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªä»£ç†ï¼Œè­¬å¦‚ä¸€ä¸ªç”¨æ¥è¿éœ€è¦ç»è¿‡è·³æ¿æœºä»£ç†çš„é›†ç¾¤æœåŠ¡ï¼Œä¸€ä¸ªåˆ™ç”¨æ¥ç§‘å­¦ä¸Šç½‘ï¼Œä¸åœåˆ‡æ¢éº»çƒ¦ä¸”ä»£ä»·æ¯”è¾ƒé«˜ï¼Œé‚£æˆ‘ä»¬é™¤äº†ShadowsocksX-NGå®¢æˆ·ç«¯ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å†å¼€å¯ä¸€ä¸ªï¼Œ<br><a id="more"></a><br><img src="/images/15277663104280.jpg" alt=""></p><p><img src="/images/15277666370736.jpg" alt=""></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># ä½¿ç”¨Homebrewå®‰è£…</span></div><div class="line">brew install shadowsocks-libev</div><div class="line"><span class="comment"># ç¼–è¾‘é…ç½®ä¿¡æ¯</span></div><div class="line">sudo vim /usr/<span class="built_in">local</span>/etc/shadowsocks-libev.json</div><div class="line"><span class="comment"># æ ¼å¼å¦‚ä¸‹ï¼Œæ³¨æ„ä¸ShadowsocksX-NGçš„local_portä¹Ÿå°±æ˜¯socks5ä¸åŒ</span></div><div class="line">&#123;</div><div class="line">    <span class="string">"server"</span>:<span class="string">"107.167.185.234"</span>,</div><div class="line">    <span class="string">"server_port"</span>:11499,</div><div class="line">    <span class="string">"local_port"</span>:1079,</div><div class="line">    <span class="string">"password"</span>:<span class="string">"xxxxxxxx"</span>,</div><div class="line">    <span class="string">"timeout"</span>:600,</div><div class="line">    <span class="string">"method"</span>:<span class="string">"aes-256-gcm"</span></div><div class="line">&#125;</div><div class="line"><span class="comment"># é‡å¯ shadowsocks-libevï¼Œä¼šè‡ªåŠ¨æ·»åŠ å¼€æœºè‡ªå¯</span></div><div class="line">brew services restart shadowsocks-libev</div></pre></td></tr></table></figure><p>å†åœ¨SwitchyOmegaé‡Œé¢è®¾ç½®ä¸¤ä¸ªä¸åŒçš„ä»£ç†å³å¯ï¼Œ<br><img src="/images/15277663992132.jpg" alt=""></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦ä¸¤ä¸ªä»£ç†ï¼Œè­¬å¦‚ä¸€ä¸ªç”¨æ¥è¿éœ€è¦ç»è¿‡è·³æ¿æœºä»£ç†çš„é›†ç¾¤æœåŠ¡ï¼Œä¸€ä¸ªåˆ™ç”¨æ¥ç§‘å­¦ä¸Šç½‘ï¼Œä¸åœåˆ‡æ¢éº»çƒ¦ä¸”ä»£ä»·æ¯”è¾ƒé«˜ï¼Œé‚£æˆ‘ä»¬é™¤äº†ShadowsocksX-NGå®¢æˆ·ç«¯ä¹‹å¤–ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å‘½ä»¤è¡Œçš„æ–¹å¼å†å¼€å¯ä¸€ä¸ªï¼Œ&lt;br&gt;
    
    </summary>
    
    
      <category term="Mac" scheme="http://frankchen.xyz/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>ä» Hive è·å–æ•°æ®åˆ°æœ¬åœ°çš„æ–¹æ³• ğŸ¦„</title>
    <link href="http://frankchen.xyz/2018/05/03/get-table-from-spark/"/>
    <id>http://frankchen.xyz/2018/05/03/get-table-from-spark/</id>
    <published>2018-05-03T12:51:14.000Z</published>
    <updated>2018-08-21T09:34:02.661Z</updated>
    
    <content type="html"><![CDATA[<p>æˆ‘ä»¬ä½¿ç”¨pyspark è¯»å–Hiveé‡Œçš„è¡¨æ ¼ï¼Œå­˜å‚¨åˆ°HDFSï¼Œå†getåˆ°è·³æ¿æœºï¼Œå†rsyncåˆ°æœ¬åœ°ï¼Œå†ç”¨daskè¯»å–ä¸ºDataframeã€‚<br><a id="more"></a></p><h2 id="ç¬¬ä¸€ç‰ˆ"><a href="#ç¬¬ä¸€ç‰ˆ" class="headerlink" title="ç¬¬ä¸€ç‰ˆ"></a>ç¬¬ä¸€ç‰ˆ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"> <span class="number">1</span> <span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> *</div><div class="line"> <span class="number">2</span> <span class="keyword">import</span> pyspark</div><div class="line"> <span class="number">3</span> <span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line"> <span class="number">4</span>     spark = SparkSession.builder.master(<span class="string">"yarn"</span>).appName(<span class="string">"pyspark location process"</span>).enableHiveSupport().getOrCreate()</div><div class="line"> <span class="number">5</span>     sc = spark.sparkContext</div><div class="line"> <span class="number">6</span>    <span class="comment"># spark.sql('show databases').show()</span></div><div class="line"> <span class="number">7</span>     spark.sql(<span class="string">'use annals'</span>).show()</div><div class="line"> <span class="number">8</span>    <span class="comment"># spark.sql('describe gps2').show()</span></div><div class="line"> <span class="number">9</span>     spark.sql(<span class="string">'select * from gps2 limit 1'</span>).show()</div><div class="line"><span class="number">10</span>     sql_df = spark.sql(<span class="string">'select uid, lat, lgt, app_adjust_time from gps2 limit 5'</span>)</div><div class="line"><span class="number">11</span>     <span class="comment">#sql_df.show()</span></div><div class="line"><span class="number">12</span>     print(type(sql_df))</div><div class="line"><span class="number">13</span>     sql_df.write.save(<span class="string">"data/GrMWKfDj9eIjsRuh.parquet"</span>)</div></pre></td></tr></table></figure><h2 id="ç¬¬äºŒç‰ˆ"><a href="#ç¬¬äºŒç‰ˆ" class="headerlink" title="ç¬¬äºŒç‰ˆ"></a>ç¬¬äºŒç‰ˆ</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># find pyspark and import</span></div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> sys</div><div class="line"><span class="keyword">import</span> gc </div><div class="line">os.environ[<span class="string">'SPARK_HOME'</span>] = <span class="string">"/opt/cloudera/parcels/SPARK2/lib/spark2"</span></div><div class="line">sys.path.append(os.path.join(<span class="string">"/home/ubuntu/data/pythonpackage"</span>))</div><div class="line">sys.path.append(os.path.join(os.environ[<span class="string">'SPARK_HOME'</span>], <span class="string">"python"</span>))</div><div class="line">sys.path.append(os.path.join(os.environ[<span class="string">'SPARK_HOME'</span>], <span class="string">"python/lib/py4j-0.10.6-src.zip"</span>))</div><div class="line"></div><div class="line"><span class="keyword">try</span>:</div><div class="line">    <span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkContext</div><div class="line">    <span class="keyword">from</span> pyspark.sql <span class="keyword">import</span> SparkSession</div><div class="line"></div><div class="line">    <span class="keyword">from</span> pyspark <span class="keyword">import</span> SparkConf</div><div class="line">    </div><div class="line">    print(<span class="string">"success"</span>)</div><div class="line"></div><div class="line"><span class="keyword">except</span> ImportError <span class="keyword">as</span> e:</div><div class="line">    print(<span class="string">"error importing spark modules"</span>, e)</div><div class="line">    sys.exit(<span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment">#   SparkSessionåˆå§‹åŒ–</span></div><div class="line">spark = SparkSession \</div><div class="line">    .builder \</div><div class="line">    .master(<span class="string">"yarn"</span>) \</div><div class="line">    .appName(<span class="string">"gps"</span>) \</div><div class="line">    .config(<span class="string">"spark.submit.deployMode"</span>,<span class="string">"client"</span>) \</div><div class="line">    .config(<span class="string">"num-executors"</span>, <span class="number">5</span>) \</div><div class="line">    .config(<span class="string">"executor-cores"</span>, <span class="number">4</span>) \</div><div class="line">    .config(<span class="string">"executor-memory"</span>, <span class="string">"2g"</span>) \</div><div class="line">    .config(<span class="string">"driver-memory"</span>, <span class="string">"1g"</span>) \</div><div class="line">    .enableHiveSupport() \</div><div class="line">    .getOrCreate() </div><div class="line">sc = spark.sparkContext</div><div class="line"></div><div class="line"><span class="comment"># spark sqlï¼Œå¾—åˆ°dataframe</span></div><div class="line">df = spark.sql(<span class="string">"SELECT * FROM tmp.czn_userlocation_filteredby_black"</span>)</div><div class="line">df.printSchema()</div><div class="line">df.show(<span class="number">3</span>)</div><div class="line"></div><div class="line"><span class="comment"># å†™åˆ°hdfsä¸Šï¼Œparquetæ ¼å¼</span></div><div class="line">df.write.parquet(<span class="string">"/user/akulaku/czn_userlocation_filteredby_black.parquet"</span>)</div></pre></td></tr></table></figure><p>è¿™æ ·æˆ‘ä»¬å°±åœ¨hdfsä¸Šå¾—åˆ°äº†ä¸€ä»½parquetæ ¼å¼çš„æ–‡ä»¶ã€‚</p><h2 id="ç¬¬ä¸‰ç‰ˆ"><a href="#ç¬¬ä¸‰ç‰ˆ" class="headerlink" title="ç¬¬ä¸‰ç‰ˆ"></a>ç¬¬ä¸‰ç‰ˆ</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬å¯ä»¥åœ¨hiveæˆ–è€…impalaä¸Šå»ºè¡¨ï¼Œä¾‹å¦‚</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">create table tmp.czn_usersensorlog_of_may as SELECT uid, apptime, value0, value1, value2 FROM ods.usersensorlog WHERE month = <span class="string">"2018_05"</span></div></pre></td></tr></table></figure><p><code>show create table tmp.czn_usersensorlog_of_may</code><br><code>CREATE TABLE tmp.czn_usersensorlog_of_may (   uid BIGINT,   apptime BIGINT,   value0 FLOAT,   value1 FLOAT,   value2 FLOAT ) STORED AS TEXTFILE LOCATION &#39;hdfs://nameservice1/user/hive/warehouse/tmp.db/czn_usersensorlog_of_may&#39;</code></p><h2 id="ç¬¬å››ç‰ˆ"><a href="#ç¬¬å››ç‰ˆ" class="headerlink" title="ç¬¬å››ç‰ˆ"></a>ç¬¬å››ç‰ˆ</h2><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦æŒ‡å®šè¡¨çš„æ ¼å¼ä¸ºparquetï¼Œè¿™æ ·æœ‰åˆ©äºç”¨pandasæˆ–è€…daskè¯»å–ï¼Œé‚£ä¹ˆå¯ä»¥å¦‚ä¸‹è®¾ç½®ï¼Œè¿™é‡Œæˆ‘ä»¬å…ˆå»ºè¡¨å†æ’å…¥æ•°æ®ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">drop table <span class="keyword">if</span> exists tmp.czn_userlocation_tmp_test;</div><div class="line">CREATE TABLE tmp.czn_userlocation_tmp_test </div><div class="line">(   </div><div class="line">uid BIGINT,</div><div class="line">lat <span class="built_in">float</span>,</div><div class="line">lgt <span class="built_in">float</span>,</div><div class="line">apptime BIGINT,</div><div class="line">)</div><div class="line">STORED AS PARQUET</div><div class="line">TBLPROPERTIES (<span class="string">'parquet.compression'</span>=<span class="string">'SNAPPY'</span>);</div><div class="line"></div><div class="line">insert OVERWRITE TABLE tmp. czn_userlocation_tmp_test</div><div class="line">SELECT  uid, lat, lgt,  apptime </div><div class="line">from kafka_table.userlocation2 </div><div class="line">WHERE apptime between 1532156404000 and 1532156764000;</div></pre></td></tr></table></figure><p>å¾—åˆ°äº†hdfsè·¯å¾„ï¼Œè¿™é‡Œæˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨hdfså‘½ä»¤get</p><p>æ­¤æ—¶æ•°æ®åªæ˜¯åœ¨hdfsä¸Šï¼Œæˆ‘ä»¬è¦ä¸‹è½½è¿˜éœ€è¦å°†æ•°æ®ä»hdfs å¤åˆ¶åˆ°è·³æ¿æœºï¼Œ</p><p><code>hadoop fs -get /user/akulaku/czn_userlocation_filteredby_black.parquet chenzn/</code></p><p>å†scp ä¹‹ç±»çš„ å¤åˆ¶åˆ°æœ¬åœ°å³å¯ï¼Œä¸è¿‡ç›¸æ¯”scpï¼Œrsyncæ›´é€‚åˆä¼ è¾“parquetï¼Œä¾‹å¦‚ï¼Œå¯ä»¥å‹ç¼©ï¼Œæ–­ç‚¹ç»­ä¼ ç­‰ç­‰ï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">rsync -P -z -r <span class="_">-e</span> ssh akulaku@cdh-master4:~/chenzn/czn_userlocation_filteredby_black.parquet ~</div></pre></td></tr></table></figure><p>parquetæ ¼å¼æ–‡ä»¶çš„è¯»å–å¯ä»¥ä½¿ç”¨daskï¼Œå¹¶é€‰æ‹©â€˜pyarrowâ€™å¼•æ“ï¼Œå¯ä»¥é¡ºåˆ©è¯»å–è¶…è¿‡å†…å­˜çš„æ•°æ®ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> dask.dataframe <span class="keyword">as</span> dd</div><div class="line">df = dd.read_parquet(file_path, engine=<span class="string">'pyarrow'</span>)</div></pre></td></tr></table></figure><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>rsyncå…¶ä¸­å‚æ•°å¦‚ä¸‹ï¼Œå‚è€ƒè‡ª<a href="https://kyup.com/tutorials/copy-files-rsync-ssh/" target="_blank" rel="external">How to copy files with rsync over SSH - Tutorials For Kyup.com</a>ï¼š</p><ul><li>â€“delete - delete files that donâ€™t exist on sender (system)</li><li>-v - verbose (-vv will provide more detailed information)</li><li>-e â€œssh optionsâ€ - specify the ssh as remote shell</li><li>-a - archive mode - it preserves permissions (owners, groups), times, symbolic links, and devices</li><li>-r - recurse into directories</li><li>-z - compress file data during transfer</li><li>â€“exclude â€˜foldernameâ€™ â€“ excludes the corresponding folder from transfer</li><li>-P â€“ show progress during transfer</li></ul><p>ğŸ¶ğŸ’</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬ä½¿ç”¨pyspark è¯»å–Hiveé‡Œçš„è¡¨æ ¼ï¼Œå­˜å‚¨åˆ°HDFSï¼Œå†getåˆ°è·³æ¿æœºï¼Œå†rsyncåˆ°æœ¬åœ°ï¼Œå†ç”¨daskè¯»å–ä¸ºDataframeã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="spark" scheme="http://frankchen.xyz/tags/spark/"/>
    
  </entry>
  
  <entry>
    <title>Mac é€šè¿‡ socks5 ä»£ç† è¿æ¥ ssh çš„æ–¹æ³•ğŸ†</title>
    <link href="http://frankchen.xyz/2018/05/03/mac-ssh-through-socks5-proxy/"/>
    <id>http://frankchen.xyz/2018/05/03/mac-ssh-through-socks5-proxy/</id>
    <published>2018-05-03T09:08:10.000Z</published>
    <updated>2018-05-03T09:15:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç»è¿‡ä¸€ç•ªç—›è‹¦çš„æŠ˜è…¾ï¼Œæˆ‘æ‰å‘ç°<strong>socks,httpä»£ç†ç­‰ä½¿ç”¨çš„æ˜¯TCPæˆ–UDPåè®®, è€Œpingå‘½ä»¤åˆ™æ˜¯ICMPåè®®, æ‰€ä»¥proxychains4å¯¹pingå‘½ä»¤æ— æ•ˆ.</strong>ï¼Œæœ€ç»ˆåˆæŠ˜è…¾è¿‡tsocksç­‰å’Œproxychainsä¸€æ ·å¾·è¡Œçš„ä»¥åï¼Œæœ€ç»ˆåœ¨ä¸‡èƒ½çš„Stack Overflowæ‰¾åˆ°<a href="https://serverfault.com/questions/315605/ssh-through-a-socks-proxy-client-openssh-os-x" target="_blank" rel="external">ç­”æ¡ˆ</a>ï¼šå³é€šè¿‡NetCat (nc)è¿æ¥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">vim ~/.ssh/config</div><div class="line"><span class="comment"># æ·»åŠ ä»¥ä¸‹å†…å®¹</span></div><div class="line">Host 52.* <span class="comment"># è¿™é‡Œå¯ä»¥é€šé…ä¹Ÿå¯ä»¥æŒ‡å®šIP</span></div><div class="line">    ProxyCommand nc -X 5 -x 127.0.0.1:1079 %h %p</div><div class="line">    <span class="comment"># "5" æ˜¯ SOCKS 5, "1079" æ˜¯æœ¬åœ°socksç«¯å£</span></div></pre></td></tr></table></figure><p>ä¹‹åç›´æ¥ä½¿ç”¨<code>ssh</code>å‘½ä»¤è¿æ¥å³å¯ğŸ˜ğŸ˜‚</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;ç»è¿‡ä¸€ç•ªç—›è‹¦çš„æŠ˜è…¾ï¼Œæˆ‘æ‰å‘ç°&lt;strong&gt;socks,httpä»£ç†ç­‰ä½¿ç”¨çš„æ˜¯TCPæˆ–UDPåè®®, è€Œpingå‘½ä»¤åˆ™æ˜¯ICMPåè®®, æ‰€ä»¥proxychains4å¯¹pingå‘½ä»¤æ— æ•ˆ.&lt;/strong&gt;ï¼Œæœ€ç»ˆåˆæŠ˜è…¾è¿‡tsocksç­‰å’Œproxychainsä¸€æ ·å¾·è¡Œçš„ä»¥åï¼Œæœ€ç»ˆåœ¨
      
    
    </summary>
    
    
      <category term="Mac" scheme="http://frankchen.xyz/tags/Mac/"/>
    
  </entry>
  
  <entry>
    <title>moving averge æ»‘åŠ¨å¹³å‡</title>
    <link href="http://frankchen.xyz/2018/04/25/moving-averge/"/>
    <id>http://frankchen.xyz/2018/04/25/moving-averge/</id>
    <published>2018-04-25T14:58:46.000Z</published>
    <updated>2018-04-26T03:49:59.000Z</updated>
    
    <content type="html"><![CDATA[<p>moving averge å³æ»‘åŠ¨å¹³å‡ï¼Œæ—¶é—´åºåˆ—å¤„ç†ä¸­å¸¸è§çš„æ–¹æ³•ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯¹äºä¸€ä¸ªç»™å®šæ•°åˆ—ï¼Œè®¾å®šä¸€ä¸ªçª—å£å€¼Nï¼Œä¾æ¬¡å–ç¬¬1é¡¹~ç¬¬Né¡¹ï¼Œç¬¬2é¡¹~ç¬¬N+1é¡¹ï¼Œç¬¬3é¡¹~ç¬¬N+2é¡¹çš„å¹³å‡å€¼ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p><a id="more"></a><p>æ•°æ®æ¥è‡ª<a href="http://blog.topspeedsnail.com/wp-content/uploads/2016/12/%E9%93%81%E8%B7%AF%E5%AE%A2%E8%BF%90%E9%87%8F.csv" target="_blank" rel="external">é“è·¯å®¢è¿é‡.csvï¼ˆ2005-2016æœˆåº¦æ•°æ®ï¼‰</a><br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line"><span class="keyword">import</span> requests</div><div class="line"><span class="keyword">import</span> io</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> pylab</div><div class="line">pylab.style.use(<span class="string">'bmh'</span>)</div><div class="line"><span class="keyword">from</span> pylab <span class="keyword">import</span> rcParams</div><div class="line">rcParams[<span class="string">'figure.figsize'</span>] = <span class="number">10</span>, <span class="number">8</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">moving_average</span><span class="params">(l, N)</span>:</span></div><div class="line">sum = <span class="number">0</span></div><div class="line">result = list( <span class="number">0</span> <span class="keyword">for</span> x <span class="keyword">in</span> l)</div><div class="line"> </div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range( <span class="number">0</span>, N ):</div><div class="line">       <span class="comment"># ä»å·¦åˆ°å³é€æ¸æ·»åŠ indexåœ¨Nä¹‹å†…çš„æ•°å­—</span></div><div class="line">sum = sum + l[i]</div><div class="line">result[i] = sum / (i+<span class="number">1</span>)</div><div class="line"> </div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range( N, len(l) ):</div><div class="line">       <span class="comment"># åŠ å…¥æœ€å³è¾¹æ•°å­—å‡å»æœ€å·¦è¾¹æ•°å­—</span></div><div class="line">sum = sum - l[i-N] + l[i]</div><div class="line">result[i] = sum / N</div><div class="line"> </div><div class="line"><span class="keyword">return</span> result</div><div class="line"> </div><div class="line"><span class="comment"># ä½¿ç”¨æ•ˆç‡æ›´é«˜çš„numpy</span></div><div class="line"><span class="comment"># http://stackoverflow.com/questions/13728392/moving-average-or-running-mean</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fast_moving_average</span><span class="params">(x, N)</span>:</span></div><div class="line"><span class="keyword">return</span> np.convolve(x, np.ones((N,))/N)[(N<span class="number">-1</span>):]</div><div class="line"> </div><div class="line">url = <span class="string">'é“è·¯å®¢è¿é‡.csv'</span></div><div class="line"></div><div class="line"> </div><div class="line">df = pd.read_csv(url)  <span class="comment"># python2ä½¿ç”¨StringIO.StringIO</span></div><div class="line"> </div><div class="line">data = np.array(df[<span class="string">'é“è·¯å®¢è¿é‡_å½“æœŸå€¼(ä¸‡äºº)'</span>])</div><div class="line"> </div><div class="line">dic = &#123;&#125;</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [<span class="number">3</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">20</span>]:</div><div class="line">    ma_data = moving_average(data, i)</div><div class="line">    dic[i] = ma_data</div><div class="line">ma_data_df = pd.DataFrame(dic)</div><div class="line"></div><div class="line">ma_data_df.plot()</div></pre></td></tr></table></figure></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¶‹åŠ¿é€æ¸å˜å¾—å¹³æ»‘ï¼Œå³å¯¹å±€éƒ¨éœ‡è¡ä¸æ•æ„Ÿã€‚</p><p><img src="/images/download.png" alt="download"></p><p>ä½¿ç”¨numpy.convolveæ˜¯ä¸€ç§æ›´æ–¹ä¾¿çš„æ–¹æ³•ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯å…¶æœ‰ä¸‰ç§modeï¼Œåˆ†åˆ«æ˜¯â€™fullâ€™ï¼ˆå•ä¸ªé‡å ä¹Ÿè®¡ç®—ï¼‰, â€˜sameâ€™ï¼ˆå¼ºåˆ¶ç­‰é•¿ï¼‰, â€˜validâ€™ï¼ˆå®Œå…¨é‡å ï¼‰ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">fast_moving_average</span><span class="params">(x, N, mode)</span>:</span></div><div class="line"><span class="comment"># return np.convolve(x, np.ones((N,))/N, mode='valid')[(N-1):]</span></div><div class="line"><span class="keyword">return</span> np.convolve(x, np.ones((N,))/N, mode=mode)</div><div class="line">dic = &#123;&#125;</div><div class="line">modes = [<span class="string">'full'</span>, <span class="string">'same'</span>, <span class="string">'valid'</span>]</div><div class="line">i = <span class="number">10</span></div><div class="line"><span class="keyword">for</span> mode <span class="keyword">in</span> modes:</div><div class="line">    ma_data = fast_moving_average(data, i, mode)</div><div class="line">    pylab.plot(ma_data)</div><div class="line">pylab.legend(modes)</div></pre></td></tr></table></figure><p><img src="/images/download%20-1-.png" alt="download -1-"></p><p>å‚è€ƒè‡ªæ–—å¤§ç†Šçš„åšå®¢<a href="http://blog.topspeedsnail.com/archives/11022" target="_blank" rel="external">MovingAverage-æ»‘åŠ¨å¹³å‡ â€“ WTF Daily Blog</a></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;moving averge å³æ»‘åŠ¨å¹³å‡ï¼Œæ—¶é—´åºåˆ—å¤„ç†ä¸­å¸¸è§çš„æ–¹æ³•ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯å¯¹äºä¸€ä¸ªç»™å®šæ•°åˆ—ï¼Œè®¾å®šä¸€ä¸ªçª—å£å€¼Nï¼Œä¾æ¬¡å–ç¬¬1é¡¹~ç¬¬Né¡¹ï¼Œç¬¬2é¡¹~ç¬¬N+1é¡¹ï¼Œç¬¬3é¡¹~ç¬¬N+2é¡¹çš„å¹³å‡å€¼ï¼Œä»¥æ­¤ç±»æ¨ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="time series" scheme="http://frankchen.xyz/tags/time-series/"/>
    
  </entry>
  
  <entry>
    <title>keras ä¸­æ¨¡å‹çš„ä¿å­˜åŠé‡ç”¨</title>
    <link href="http://frankchen.xyz/2018/04/19/keras-reuse-model/"/>
    <id>http://frankchen.xyz/2018/04/19/keras-reuse-model/</id>
    <published>2018-04-19T08:50:00.000Z</published>
    <updated>2018-04-25T11:57:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/15135840798621.jpg" alt=""><br>æ·±åº¦å­¦ä¹ ä¸­å¦‚ä½•ä¿å­˜æœ€ä½³æ¨¡å‹ï¼Œå¦‚ä½•é‡ç”¨å·²ç»ä¿å­˜çš„æ¨¡å‹ï¼Ÿæœ¬æ–‡ä¸»è¦ä»‹ç»Keras ä¿å­˜åŠé‡ç”¨æ¨¡å‹çš„æ–¹æ³•<br><a id="more"></a></p><h2 id="ä¿å­˜æ¨¡å‹"><a href="#ä¿å­˜æ¨¡å‹" class="headerlink" title="ä¿å­˜æ¨¡å‹"></a>ä¿å­˜æ¨¡å‹</h2><p>å¦‚ä¸‹ï¼Œæˆ‘ä»¬é¢„å®šä¹‰ä¿å­˜çš„<code>hdf5</code>æ–‡ä»¶åï¼Œå†åˆå§‹åŒ–<code>ModelCheckpoint</code>ï¼Œå°†å…¶åŠ å…¥Kerasçš„callbacké‡Œï¼ˆå³æ¯ä¸ªbatchç»“æŸååšçš„äº‹æƒ…ï¼‰ï¼Œé‚£ä¹ˆæ¨¡å‹å°±ä¼šåœ¨æ¯æ¬¡batchç»“æŸåå¯¹æ¯”ï¼Œä¿å­˜æœ€å¥½çš„æ¨¡å‹ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> keras.callbacks <span class="keyword">import</span> ModelCheckpoint</div><div class="line"></div><div class="line"><span class="comment"># create model</span></div><div class="line">model = Sequential()</div><div class="line">model.add(...)</div><div class="line">model.add(...)</div><div class="line">model.add(...)</div><div class="line"><span class="comment"># Compile model</span></div><div class="line">model.compile(...)</div><div class="line"><span class="comment"># checkpoint</span></div><div class="line">filepath=<span class="string">"weights-&#123;epoch:02d&#125;-&#123;val_acc:.2f&#125;.hdf5"</span></div><div class="line">checkpoint = ModelCheckpoint(filepath, monitor=<span class="string">'val_acc'</span>, verbose=<span class="number">1</span>, save_best_only=<span class="keyword">True</span>, mode=<span class="string">'max'</span>)</div><div class="line"><span class="comment"># Fit the model</span></div><div class="line">model.fit(X, Y, validation_split=<span class="number">0.33</span>, epochs=<span class="number">150</span>, batch_size=<span class="number">10</span>, callbacks=[checkpoint], verbose=<span class="number">0</span>)</div></pre></td></tr></table></figure><p>ç»“æŸåï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°å¦‚ä¸‹çš„ç»“æœï¼Œ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">...</div><div class="line">weights-53-0.76.hdf5</div><div class="line">weights-71-0.76.hdf5</div><div class="line">weights-77-0.78.hdf5</div><div class="line">weights-99-0.78.hdf5</div></pre></td></tr></table></figure><p>å¦‚æœæˆ‘ä»¬åªæƒ³ä¿å­˜ä¸€ä¸ªæœ€å¥½çš„æ¨¡å‹ï¼Œé‚£ä¹ˆæŠŠä¿å­˜æ–‡ä»¶åå­—å›ºå®šä¸º<code>filepath=&quot;weights.best.hdf5&quot;</code>å³å¯ã€‚</p><h2 id="loadæ¨¡å‹"><a href="#loadæ¨¡å‹" class="headerlink" title="loadæ¨¡å‹"></a>loadæ¨¡å‹</h2><p>æ³¨æ„ï¼Œä¹‹å‰ä¿å­˜çš„åªæ˜¯æ¨¡å‹çš„weightsï¼Œé‡æ–°loadéœ€è¦å†æ¬¡å®šä¹‰æ¨¡å‹ç»“æ„å†load weightså¹¶å†æ¬¡combineï¼Œä¾‹å¦‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> keras.callbacks <span class="keyword">import</span> ModelCheckpoint</div><div class="line"><span class="comment"># create model</span></div><div class="line">model = Sequential()</div><div class="line">model.add(...)</div><div class="line">model.add(...)</div><div class="line">model.add(...)</div><div class="line"><span class="comment"># load weights</span></div><div class="line">model.load_weights(<span class="string">"weights.best.hdf5"</span>)</div><div class="line"><span class="comment"># Compile model </span></div><div class="line">model.compile(...)</div><div class="line"><span class="comment"># estimate accuracy </span></div><div class="line">scores = model.evaluate(X, Y, verbose=<span class="number">0</span>)</div><div class="line">print(<span class="string">'&#123;&#125;: &#123;:.2%&#125;'</span>.format(model.metrics_names[<span class="number">1</span>], scores[<span class="number">1</span>]))</div></pre></td></tr></table></figure><p>å¦‚æœä¹‹å‰é€‰æ‹©äº†è¿æ¨¡å‹ç»“æ„ä¹Ÿä¸€èµ·ä¿å­˜ï¼ˆå³åœ¨<code>ModelCheckpoint</code>ä¸­é€‰æ‹©<code>save_weights_only=False</code>ï¼‰ï¼Œé‚£ä¹ˆloadå°±å¾ˆç®€å•ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> keras.callbacks <span class="keyword">import</span> ModelCheckpoint</div><div class="line"><span class="keyword">from</span> keras.models <span class="keyword">import</span> load_model</div><div class="line"></div><div class="line"><span class="comment"># create model</span></div><div class="line">model = Sequential()</div><div class="line">model.add(...)</div><div class="line">model.add(...)</div><div class="line">model.add(...)</div><div class="line"><span class="comment"># Compile model</span></div><div class="line">model.compile(...)</div><div class="line"><span class="comment"># checkpoint</span></div><div class="line">filepath=<span class="string">"weights-best.hdf5"</span></div><div class="line">checkpoint = ModelCheckpoint(filepath, monitor=<span class="string">'val_acc'</span>, verbose=<span class="number">1</span>, save_best_only=<span class="keyword">True</span>, mode=<span class="string">'max'</span>, save_weights_only=<span class="keyword">False</span>)</div><div class="line"></div><div class="line"><span class="comment"># Fit the model</span></div><div class="line">model.fit(X, Y, validation_split=<span class="number">0.33</span>, epochs=<span class="number">150</span>, batch_size=<span class="number">10</span>, callbacks=[checkpoint], verbose=<span class="number">0</span>)</div><div class="line"></div><div class="line"><span class="comment"># Load the model</span></div><div class="line">model= load_model(filepath)</div><div class="line">scores=model.evaluate(X, Y,verbose=<span class="number">0</span>)</div><div class="line">print(<span class="string">'&#123;&#125;: &#123;:.2%&#125;'</span>.format(model.metrics_names[<span class="number">1</span>], scores[<span class="number">1</span>]))</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/15135840798621.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;æ·±åº¦å­¦ä¹ ä¸­å¦‚ä½•ä¿å­˜æœ€ä½³æ¨¡å‹ï¼Œå¦‚ä½•é‡ç”¨å·²ç»ä¿å­˜çš„æ¨¡å‹ï¼Ÿæœ¬æ–‡ä¸»è¦ä»‹ç»Keras ä¿å­˜åŠé‡ç”¨æ¨¡å‹çš„æ–¹æ³•&lt;br&gt;
    
    </summary>
    
    
      <category term="Keras" scheme="http://frankchen.xyz/tags/Keras/"/>
    
  </entry>
  
  <entry>
    <title>ç†è§£ä¸€ç»´å·ç§¯</title>
    <link href="http://frankchen.xyz/2018/04/17/conv1d-in-keras/"/>
    <id>http://frankchen.xyz/2018/04/17/conv1d-in-keras/</id>
    <published>2018-04-17T07:46:36.000Z</published>
    <updated>2018-04-19T08:50:30.000Z</updated>
    
    <content type="html"><![CDATA[<p>ç†è§£ä¸€ç»´å·ç§¯<br><a id="more"></a><br>ä¸‹é¢æ˜¯ä¸€ä¸ªåˆ©ç”¨CNNè¿›è¡ŒNLPä¸­çš„æƒ…æ„Ÿåˆ†ç±»çš„ä¾‹å­ï¼Œ<br><img src="/images/15240224514694.png" alt=""></p><p>ä¸Šå›¾ä¸­ï¼Œè¾“å…¥ä¸ºè¡¨ç¤ºä¸ºè¯è¡¨ä¸ºd=5ï¼Œé•¿åº¦ä¸º7çš„çŸ©é˜µçš„å¥å­ï¼Œ1Då·ç§¯æ ¸ä¸ºé•¿åº¦åˆ†åˆ«ä¸º(2,3,4)çš„å„ä¸¤ä¸ªï¼Œç»è¿‡å·ç§¯å¹¶æ¿€æ´»å‡½æ•°åï¼Œå„è‡ªäº§ç”Ÿäº†(4x1, 5x1, 6x1)çš„å„ä¸¤ä¸ªfeature mapï¼Œæ¯ä¸ªfeature mapç»è¿‡ä¸€æ¬¡1D max poolingåï¼ˆå³å–æ¯ä¸ªfeature mapçš„æœ€å¤§å€¼ï¼‰å†concatenateä¸ºä¸€ä¸ª6x1çš„1Då‘é‡ï¼Œç»è¿‡ä¸€ä¸ªå…¨è¿æ¥å±‚å†softmaxæ¿€æ´»å³å¯è¿›è¡Œæƒ…æ„Ÿåˆ†ç±»é¢„æµ‹ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ç†è§£ä¸€ç»´å·ç§¯&lt;br&gt;
    
    </summary>
    
    
      <category term="Deep Learning" scheme="http://frankchen.xyz/tags/Deep-Learning/"/>
    
  </entry>
  
  <entry>
    <title>å¤„ç†å¤§æ•°æ®é›†çš„å»ºè®®</title>
    <link href="http://frankchen.xyz/2018/04/10/handle-big-datasets/"/>
    <id>http://frankchen.xyz/2018/04/10/handle-big-datasets/</id>
    <published>2018-04-10T07:07:34.000Z</published>
    <updated>2018-04-10T08:15:51.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘çš„ä¸€äº›æ¯”èµ›å¦‚<a href="https://www.kaggle.com/c/talkingdata-adtracking-fraud-detection" target="_blank" rel="external">TalkingData AdTracking Fraud Detection Challenge | Kaggle</a>æä¾›äº†å¾ˆå¤§çš„æ•°æ®é›†ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåªæœ‰16Gçš„å†…å­˜çš„â€œå°â€ç”µè„‘éƒ½æ— æ³•ç›´æ¥å¤„ç†è¿™ç§æ•°æ®é›†äº†ï¼Œæœ¬æ–‡æ”¶é›†äº†ä¸€äº›å…³äºå¤„ç†è¿™ç§æ•°æ®çš„å»ºè®®ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚<br><a id="more"></a></p><h2 id="1-åŠæ—¶åˆ é™¤æ— ç”¨å˜é‡å¹¶åƒåœ¾å›æ”¶"><a href="#1-åŠæ—¶åˆ é™¤æ— ç”¨å˜é‡å¹¶åƒåœ¾å›æ”¶" class="headerlink" title="1.åŠæ—¶åˆ é™¤æ— ç”¨å˜é‡å¹¶åƒåœ¾å›æ”¶"></a>1.åŠæ—¶åˆ é™¤æ— ç”¨å˜é‡å¹¶åƒåœ¾å›æ”¶</h2><p>é€šå¸¸æˆ‘ä»¬åœ¨ç‰¹å¾å·¥ç¨‹ä¸­ä¼šæ¶‰åŠå¤§é‡çš„è½¬æ¢æ“ä½œï¼Œäº§ç”Ÿå¾ˆå¤šçš„ä¸­é—´å˜é‡ç­‰ï¼Œé™¤äº†ä½¿ç”¨<code>del</code>ä»¥å¤–ï¼Œä½¿ç”¨<code>gc.collect()</code>ä¹Ÿæ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">temp = pd.read_csv(<span class="string">'../input/train_sample.csv'</span>)</div><div class="line"></div><div class="line"><span class="comment">#do something to the file</span></div><div class="line">temp[<span class="string">'os'</span>] = temp[<span class="string">'os'</span>].astype(<span class="string">'str'</span>)</div><div class="line"><span class="comment">#delete when no longer needed</span></div><div class="line"><span class="keyword">del</span> temp</div><div class="line"><span class="comment">#collect residual garbage</span></div><div class="line">gc.collect()</div></pre></td></tr></table></figure><h2 id="2-é¢„å®šä¹‰æ•°æ®ç±»å‹"><a href="#2-é¢„å®šä¹‰æ•°æ®ç±»å‹" class="headerlink" title="2.é¢„å®šä¹‰æ•°æ®ç±»å‹"></a>2.é¢„å®šä¹‰æ•°æ®ç±»å‹</h2><p>pandasä¸€èˆ¬ä¼šè‡ªå·±æ¨æ–­æ•°æ®ç±»å‹ï¼Œä¸è¿‡å€¾å‘äºä½¿ç”¨è€—è´¹ç©ºé—´å¤§çš„ï¼Œå¦‚ä¸‹é¢ä¾‹å­æ‰€ç¤ºï¼Œé¢„å®šä¹‰æ•°æ®ç±»å‹èŠ‚çœäº†è¶…è¿‡ä¸€åŠçš„ç©ºé—´ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line">dtypes = &#123;</div><div class="line">        <span class="string">'ip'</span>            : <span class="string">'uint32'</span>,</div><div class="line">        <span class="string">'app'</span>           : <span class="string">'uint16'</span>,</div><div class="line">        <span class="string">'device'</span>        : <span class="string">'uint16'</span>,</div><div class="line">        <span class="string">'os'</span>            : <span class="string">'uint16'</span>,</div><div class="line">        <span class="string">'channel'</span>       : <span class="string">'uint16'</span>,</div><div class="line">        <span class="string">'is_attributed'</span> : <span class="string">'uint8'</span>,</div><div class="line">        &#125;</div><div class="line"></div><div class="line">dtypes2 = &#123;</div><div class="line">        <span class="string">'ip'</span>            : <span class="string">'int32'</span>,</div><div class="line">        <span class="string">'app'</span>           : <span class="string">'int16'</span>,</div><div class="line">        <span class="string">'device'</span>        : <span class="string">'int16'</span>,</div><div class="line">        <span class="string">'os'</span>            : <span class="string">'int16'</span>,</div><div class="line">        <span class="string">'channel'</span>       : <span class="string">'int16'</span>,</div><div class="line">        <span class="string">'is_attributed'</span> : <span class="string">'int8'</span>,</div><div class="line">        &#125;</div><div class="line"></div><div class="line">train = pd.read_csv(train_sample_file,parse_dates=[<span class="string">'click_time'</span>])</div><div class="line"></div><div class="line"><span class="comment">#check datatypes:</span></div><div class="line">train.info()</div><div class="line"></div><div class="line">train = pd.read_csv(train_sample_file,dtype=dtypes,parse_dates=[<span class="string">'click_time'</span>])</div><div class="line"></div><div class="line"><span class="comment">#check datatypes:</span></div><div class="line">train.info()</div><div class="line"></div><div class="line"></div><div class="line">train = pd.read_csv(train_sample_file,dtype=dtypes2,parse_dates=[<span class="string">'click_time'</span>])</div><div class="line"></div><div class="line"><span class="comment">#check datatypes:</span></div><div class="line">train.info()</div><div class="line"></div><div class="line"><span class="string">'''</span></div><div class="line">&lt;class 'pandas.core.frame.DataFrame'&gt;</div><div class="line">RangeIndex: 100000 entries, 0 to 99999</div><div class="line">Data columns (total 8 columns):</div><div class="line">ip                 100000 non-null int64</div><div class="line">app                100000 non-null int64</div><div class="line">device             100000 non-null int64</div><div class="line">os                 100000 non-null int64</div><div class="line">channel            100000 non-null int64</div><div class="line">click_time         100000 non-null datetime64[ns]</div><div class="line">attributed_time    227 non-null object</div><div class="line">is_attributed      100000 non-null int64</div><div class="line">dtypes: datetime64[ns](1), int64(6), object(1)</div><div class="line">memory usage: 6.1+ MB</div><div class="line">&lt;class 'pandas.core.frame.DataFrame'&gt;</div><div class="line">RangeIndex: 100000 entries, 0 to 99999</div><div class="line">Data columns (total 8 columns):</div><div class="line">ip                 100000 non-null uint32</div><div class="line">app                100000 non-null uint16</div><div class="line">device             100000 non-null uint16</div><div class="line">os                 100000 non-null uint16</div><div class="line">channel            100000 non-null uint16</div><div class="line">click_time         100000 non-null datetime64[ns]</div><div class="line">attributed_time    227 non-null object</div><div class="line">is_attributed      100000 non-null uint8</div><div class="line">dtypes: datetime64[ns](1), object(1), uint16(4), uint32(1), uint8(1)</div><div class="line">memory usage: 2.8+ MB</div><div class="line">&lt;class 'pandas.core.frame.DataFrame'&gt;</div><div class="line">RangeIndex: 100000 entries, 0 to 99999</div><div class="line">Data columns (total 8 columns):</div><div class="line">ip                 100000 non-null int32</div><div class="line">app                100000 non-null int16</div><div class="line">device             100000 non-null int16</div><div class="line">os                 100000 non-null int16</div><div class="line">channel            100000 non-null int16</div><div class="line">click_time         100000 non-null datetime64[ns]</div><div class="line">attributed_time    227 non-null object</div><div class="line">is_attributed      100000 non-null int8</div><div class="line">dtypes: datetime64[ns](1), int16(4), int32(1), int8(1), object(1)</div><div class="line">memory usage: 2.8+ MB</div><div class="line">'''</div></pre></td></tr></table></figure><h2 id="3-åªä½¿ç”¨csvæ–‡ä»¶å†…çš„æŒ‡å®šè¡Œ"><a href="#3-åªä½¿ç”¨csvæ–‡ä»¶å†…çš„æŒ‡å®šè¡Œ" class="headerlink" title="3.åªä½¿ç”¨csvæ–‡ä»¶å†…çš„æŒ‡å®šè¡Œ"></a>3.åªä½¿ç”¨csvæ–‡ä»¶å†…çš„æŒ‡å®šè¡Œ</h2><h3 id="a-æŒ‡å®šè¡Œæ•°"><a href="#a-æŒ‡å®šè¡Œæ•°" class="headerlink" title="a) æŒ‡å®šè¡Œæ•°"></a>a) æŒ‡å®šè¡Œæ•°</h3><p>ç›´æ¥ä½¿ç”¨nrowsæŒ‡å®š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">train = pd.read_csv(<span class="string">'../input/train.csv'</span>, nrows=<span class="number">1e5</span>, dtype=dtypes)</div></pre></td></tr></table></figure><h3 id="b-è·³è¿‡è¡Œæ•°"><a href="#b-è·³è¿‡è¡Œæ•°" class="headerlink" title="b) è·³è¿‡è¡Œæ•°"></a>b) è·³è¿‡è¡Œæ•°</h3><p>æ¯”å¦‚æˆ‘ä»¬è·³è¿‡å‰500wå–100wä¸‹é¢ä¿ç•™äº†headï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">train = pd.read_csv(<span class="string">'../input/train.csv'</span>, skiprows=range(<span class="number">1</span>, <span class="number">5000000</span>), nrows=<span class="number">1000000</span>, dtype=dtypes)</div></pre></td></tr></table></figure><h3 id="c-sampling"><a href="#c-sampling" class="headerlink" title="c) sampling"></a>c) sampling</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> subprocess</div><div class="line">print(<span class="string">'# Line count:'</span>)</div><div class="line"><span class="keyword">for</span> file <span class="keyword">in</span> [<span class="string">'train.csv'</span>, <span class="string">'test.csv'</span>, <span class="string">'train_sample.csv'</span>]:</div><div class="line">    lines = subprocess.run([<span class="string">'wc'</span>, <span class="string">'-l'</span>, <span class="string">'../input/&#123;&#125;'</span>.format(file)], stdout=subprocess.PIPE).stdout.decode(<span class="string">'utf-8'</span>)</div><div class="line">    print(lines, end=<span class="string">''</span>, flush=<span class="keyword">True</span>)</div><div class="line"><span class="string">'''</span></div><div class="line"># Line count:</div><div class="line">184903891 ../input/train.csv</div><div class="line">18790470 ../input/test.csv</div><div class="line">100001 ../input/train_sample.csv</div><div class="line">'''</div></pre></td></tr></table></figure><p>trainä¸€å…±æœ‰<code>lines=184903891</code> è¡Œï¼Œé‚£ä¹ˆå‡è®¾æˆ‘ä»¬éœ€è¦é‡‡æ ·å‡º100wè¡Œï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦è·³è¿‡<code>lines - 1 - 1000000</code>è¡Œï¼Œå³</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="comment">#generate list of lines to skip</span></div><div class="line">skiplines = np.random.choice(np.arange(<span class="number">1</span>, lines), size=lines<span class="number">-1</span><span class="number">-1000000</span>, replace=<span class="keyword">False</span>)</div><div class="line"></div><div class="line"><span class="comment">#sort the list</span></div><div class="line">skiplines=np.sort(skiplines)</div><div class="line"><span class="comment">#check our list</span></div><div class="line">print(<span class="string">'lines to skip:'</span>, len(skiplines))</div><div class="line">print(<span class="string">'remaining lines in sample:'</span>, lines-len(skiplines), <span class="string">'(remember that it includes the heading!)'</span>)</div><div class="line"></div><div class="line"><span class="comment">###################SANITY CHECK###################</span></div><div class="line"><span class="comment">#find lines that weren't skipped by checking difference between each consecutive line</span></div><div class="line"><span class="comment">#how many out of first 100000 will be imported into the csv?</span></div><div class="line">diff = skiplines[<span class="number">1</span>:<span class="number">100000</span>]-skiplines[<span class="number">2</span>:<span class="number">100001</span>]</div><div class="line">remain = sum(diff!=<span class="number">-1</span>)</div><div class="line">print(<span class="string">'Ratio of lines from first 100000 lines:'</span>,  <span class="string">'&#123;0:.5f&#125;'</span>.format(remain/<span class="number">100000</span>) ) </div><div class="line">print(<span class="string">'Ratio imported from all lines:'</span>, <span class="string">'&#123;0:.5f&#125;'</span>.format((lines-len(skiplines))/lines) )</div><div class="line">train = pd.read_csv(<span class="string">'../input/train.csv'</span>, skiprows=skiplines, dtype=dtypes)</div><div class="line">train.head()</div><div class="line"><span class="keyword">del</span> skiplines</div><div class="line">gc.collect()</div></pre></td></tr></table></figure><h2 id="4-ä½¿ç”¨pandas-çš„ç”Ÿæˆå™¨ï¼Œç”¨chunkå¤„ç†"><a href="#4-ä½¿ç”¨pandas-çš„ç”Ÿæˆå™¨ï¼Œç”¨chunkå¤„ç†" class="headerlink" title="4.ä½¿ç”¨pandas çš„ç”Ÿæˆå™¨ï¼Œç”¨chunkå¤„ç†"></a>4.ä½¿ç”¨pandas çš„ç”Ÿæˆå™¨ï¼Œç”¨chunkå¤„ç†</h2><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨np.whereè¿‡æ»¤æ‰â€˜is_attributedâ€™ä¸º0çš„éƒ¨åˆ†ï¼ˆä¾‹å¦‚<code>[xv if c else yv for (c,xv,yv) in zip(condition,x,y)]</code>ï¼‰<br><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#set up an empty dataframe</span></div><div class="line">df_converted = pd.DataFrame()</div><div class="line"></div><div class="line"><span class="comment">#we are going to work with chunks of size 1 million rows</span></div><div class="line">chunksize = <span class="number">10</span> ** <span class="number">6</span></div><div class="line"></div><div class="line"><span class="comment">#in each chunk, filter for values that have 'is_attributed'==1, and merge these values into one dataframe</span></div><div class="line"><span class="keyword">for</span> chunk <span class="keyword">in</span> pd.read_csv(<span class="string">'../input/train.csv'</span>, chunksize=chunksize, dtype=dtypes):</div><div class="line">    filtered = (chunk[(np.where(chunk[<span class="string">'is_attributed'</span>]==<span class="number">1</span>, <span class="keyword">True</span>, <span class="keyword">False</span>))])</div><div class="line">    df_converted = pd.concat([df_converted, filtered], ignore_index=<span class="keyword">True</span>, )</div></pre></td></tr></table></figure></p><h2 id="5-åªè½½å…¥è‹¥å¹²åˆ—"><a href="#5-åªè½½å…¥è‹¥å¹²åˆ—" class="headerlink" title="5.åªè½½å…¥è‹¥å¹²åˆ—"></a>5.åªè½½å…¥è‹¥å¹²åˆ—</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#wanted columns</span></div><div class="line">columns = [<span class="string">'ip'</span>, <span class="string">'click_time'</span>, <span class="string">'is_attributed'</span>]</div><div class="line">dtypes = &#123;</div><div class="line">        <span class="string">'ip'</span>            : <span class="string">'uint32'</span>,</div><div class="line">        <span class="string">'is_attributed'</span> : <span class="string">'uint8'</span>,</div><div class="line">        &#125;</div><div class="line"></div><div class="line">ips_df = pd.read_csv(<span class="string">'../input/train.csv'</span>, usecols=columns, dtype=dtypes)</div><div class="line">print(ips_df.info())</div><div class="line">ips_df.head()</div><div class="line"><span class="string">'''</span></div><div class="line">&lt;class 'pandas.core.frame.DataFrame'&gt;</div><div class="line">RangeIndex: 184903890 entries, 0 to 184903889</div><div class="line">Data columns (total 3 columns):</div><div class="line">ip               uint32</div><div class="line">click_time       object</div><div class="line">is_attributed    uint8</div><div class="line">dtypes: object(1), uint32(1), uint8(1)</div><div class="line">memory usage: 2.2+ GB</div><div class="line">None'''</div></pre></td></tr></table></figure><h2 id="6-ç»“åˆå¤šç§æ–¹æ³•åˆ›æ„æ€§çš„å¤„ç†æ•°æ®"><a href="#6-ç»“åˆå¤šç§æ–¹æ³•åˆ›æ„æ€§çš„å¤„ç†æ•°æ®" class="headerlink" title="6.ç»“åˆå¤šç§æ–¹æ³•åˆ›æ„æ€§çš„å¤„ç†æ•°æ®"></a>6.ç»“åˆå¤šç§æ–¹æ³•åˆ›æ„æ€§çš„å¤„ç†æ•°æ®</h2><p>ä¾‹å¦‚æ— æ³•ä½¿ç”¨æ•´ä¸ªæ•°æ®æ¥groupbyé‚£ä¹ˆå¯ä»¥åˆ†å—æ¥åšï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">size=<span class="number">100000</span></div><div class="line">all_rows = len(ips_df)</div><div class="line">num_parts = all_rows//size</div><div class="line"></div><div class="line"><span class="comment">#generate the first batch</span></div><div class="line">ip_sums = ips_df[<span class="number">0</span>:size][[<span class="string">'ip'</span>, <span class="string">'is_attributed'</span>]].groupby(<span class="string">'ip'</span>, as_index=<span class="keyword">False</span>).sum()</div><div class="line"></div><div class="line"><span class="comment">#add remaining batches</span></div><div class="line"><span class="keyword">for</span> p <span class="keyword">in</span> range(<span class="number">1</span>,num_parts):</div><div class="line">    start = p*size</div><div class="line">    end = p*size + size</div><div class="line">    <span class="keyword">if</span> end &lt; all_rows:</div><div class="line">        group = ips_df[start:end][[<span class="string">'ip'</span>, <span class="string">'is_attributed'</span>]].groupby(<span class="string">'ip'</span>, as_index=<span class="keyword">False</span>).sum()</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        group = ips_df[start:][[<span class="string">'ip'</span>, <span class="string">'is_attributed'</span>]].groupby(<span class="string">'ip'</span>, as_index=<span class="keyword">False</span>).sum()</div><div class="line">    ip_sums = ip_sums.merge(group, on=<span class="string">'ip'</span>, how=<span class="string">'outer'</span>)</div><div class="line">    ip_sums.columns = [<span class="string">'ip'</span>, <span class="string">'sum1'</span>,<span class="string">'sum2'</span>]</div><div class="line">    ip_sums[<span class="string">'conversions_per_ip'</span>] = np.nansum((ip_sums[<span class="string">'sum1'</span>], ip_sums[<span class="string">'sum2'</span>]), axis = <span class="number">0</span>)</div><div class="line">    ip_sums.drop(columns=[<span class="string">'sum1'</span>, <span class="string">'sum2'</span>], axis = <span class="number">0</span>, inplace=<span class="keyword">True</span>)</div></pre></td></tr></table></figure><h2 id="7-ä½¿ç”¨daskä»£æ›¿pandas"><a href="#7-ä½¿ç”¨daskä»£æ›¿pandas" class="headerlink" title="7.ä½¿ç”¨daskä»£æ›¿pandas"></a>7.ä½¿ç”¨daskä»£æ›¿pandas</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">import dask</div><div class="line">import dask.dataframe as dd</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘çš„ä¸€äº›æ¯”èµ›å¦‚&lt;a href=&quot;https://www.kaggle.com/c/talkingdata-adtracking-fraud-detection&quot;&gt;TalkingData AdTracking Fraud Detection Challenge | Kaggle&lt;/a&gt;æä¾›äº†å¾ˆå¤§çš„æ•°æ®é›†ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œåªæœ‰16Gçš„å†…å­˜çš„â€œå°â€ç”µè„‘éƒ½æ— æ³•ç›´æ¥å¤„ç†è¿™ç§æ•°æ®é›†äº†ï¼Œæœ¬æ–‡æ”¶é›†äº†ä¸€äº›å…³äºå¤„ç†è¿™ç§æ•°æ®çš„å»ºè®®ï¼Œä¾›å¤§å®¶å‚è€ƒã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://frankchen.xyz/tags/python/"/>
    
      <category term="Data Science" scheme="http://frankchen.xyz/tags/Data-Science/"/>
    
      <category term="Kaggle" scheme="http://frankchen.xyz/tags/Kaggle/"/>
    
  </entry>
  
  <entry>
    <title>æœºå™¨å­¦ä¹ ä¹‹ sklearnä¸­çš„pipeline</title>
    <link href="http://frankchen.xyz/2018/04/08/pipeline-in-machine-learning/"/>
    <id>http://frankchen.xyz/2018/04/08/pipeline-in-machine-learning/</id>
    <published>2018-04-08T08:13:42.000Z</published>
    <updated>2018-04-11T07:25:07.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/15231874915799.jpg" alt=""><br><a id="more"></a><br>å¦‚å›¾æ‰€ç¤ºï¼Œåˆ©ç”¨pipelineæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„å‡å°‘ä»£ç é‡åŒæ—¶è®©æœºå™¨å­¦ä¹ çš„æµç¨‹å˜å¾—ç›´è§‚ï¼Œ<br><img src="/images/15231783974167.jpg" alt=""></p><p>ä¾‹å¦‚æˆ‘ä»¬éœ€è¦åšå¦‚ä¸‹æ“ä½œï¼Œå®¹æ˜“çœ‹å‡ºï¼Œè®­ç»ƒæµ‹è¯•é›†é‡å¤äº†ä»£ç ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">vect = CountVectorizer()</div><div class="line">tfidf = TfidfTransformer()</div><div class="line">clf = SGDClassifier()</div><div class="line"></div><div class="line">vX = vect.fit_transform(Xtrain)</div><div class="line">tfidfX = tfidf.fit_transform(vX)</div><div class="line">predicted = clf.fit_predict(tfidfX)</div><div class="line"></div><div class="line"><span class="comment"># Now evaluate all steps on test set</span></div><div class="line">vX = vect.fit_transform(Xtest)</div><div class="line">tfidfX = tfidf.fit_transform(vX)</div><div class="line">predicted = clf.fit_predict(tfidfX)</div></pre></td></tr></table></figure><p>åˆ©ç”¨pipelineï¼Œä¸Šé¢ä»£ç å¯ä»¥æŠ½è±¡ä¸ºï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">pipeline = Pipeline([</div><div class="line">    (<span class="string">'vect'</span>, CountVectorizer()),</div><div class="line">    (<span class="string">'tfidf'</span>, TfidfTransformer()),</div><div class="line">    (<span class="string">'clf'</span>, SGDClassifier()),</div><div class="line">])</div><div class="line">predicted = pipeline.fit(Xtrain).predict(Xtrain)</div><div class="line"><span class="comment"># Now evaluate all steps on test set</span></div><div class="line">predicted = pipeline.predict(Xtest)</div></pre></td></tr></table></figure><p>æ³¨æ„ï¼Œpipelineæœ€åä¸€æ­¥å¦‚æœæœ‰predict()æ–¹æ³•æˆ‘ä»¬æ‰å¯ä»¥å¯¹pipelineä½¿ç”¨fit_predict()ï¼ŒåŒç†ï¼Œæœ€åä¸€æ­¥å¦‚æœæœ‰transform()æ–¹æ³•æˆ‘ä»¬æ‰å¯ä»¥å¯¹pipelineä½¿ç”¨fit_transform()æ–¹æ³•ã€‚</p><h2 id="ä½¿ç”¨pipelineåšcross-validation"><a href="#ä½¿ç”¨pipelineåšcross-validation" class="headerlink" title="ä½¿ç”¨pipelineåšcross validation"></a>ä½¿ç”¨pipelineåšcross validation</h2><p>çœ‹å¦‚ä¸‹æ¡ˆä¾‹ï¼Œå³å…ˆå¯¹è¾“å…¥æ‰‹å†™æ•°å­—çš„æ•°æ®è¿›è¡ŒPCAé™ç»´ï¼Œå†é€šè¿‡é€»è¾‘å›å½’é¢„æµ‹æ ‡ç­¾ã€‚å…¶ä¸­æˆ‘ä»¬é€šè¿‡pipelineå¯¹<br>PCAçš„é™ç»´ç»´æ•°n_componentså’Œé€»è¾‘å›å½’çš„æ­£åˆ™é¡¹Cå¤§å°åšäº¤å‰éªŒè¯ï¼Œä¸»è¦æ­¥éª¤æœ‰ï¼š</p><ol><li>ä¾æ¬¡å®ä¾‹åŒ–å„æˆåˆ†å¯¹è±¡å¦‚<code>pca = decomposition.PCA()</code></li><li>ä»¥(name, object)çš„tubleä¸ºå…ƒç´ ç»„è£…pipelineå¦‚<code>Pipeline(steps=[(&#39;pca&#39;, pca), (&#39;logistic&#39;, logistic)])</code></li><li>åˆå§‹åŒ–CVå‚æ•°å¦‚<code>n_components = [20, 40, 64]</code></li><li>å®ä¾‹åŒ–CVå¯¹è±¡å¦‚<code>estimator = GridSearchCV(pipe, dict(pca__n_components=n_components, logistic__C=Cs))</code>ï¼Œå…¶ä¸­æ³¨æ„å‚æ•°çš„ä¼ é€’æ–¹å¼ï¼Œå³keyä¸ºpipelineå…ƒç´ å+å‡½æ•°å‚æ•°</li></ol><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"><span class="keyword">from</span> sklearn <span class="keyword">import</span> linear_model, decomposition, datasets</div><div class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline</div><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</div><div class="line">logistic = linear_model.LogisticRegression()</div><div class="line"></div><div class="line">pca = decomposition.PCA()</div><div class="line">pipe = Pipeline(steps=[(<span class="string">'pca'</span>, pca), (<span class="string">'logistic'</span>, logistic)])</div><div class="line"></div><div class="line">digits = datasets.load_digits()</div><div class="line">X_digits = digits.data</div><div class="line">y_digits = digits.target</div><div class="line"></div><div class="line"><span class="comment"># Prediction</span></div><div class="line">n_components = [<span class="number">20</span>, <span class="number">40</span>, <span class="number">64</span>]</div><div class="line">Cs = np.logspace(<span class="number">-4</span>, <span class="number">4</span>, <span class="number">3</span>)</div><div class="line"></div><div class="line">pca.fit(X_digits)</div><div class="line">estimator = GridSearchCV(pipe,</div><div class="line">                         dict(pca__n_components=n_components, logistic__C=Cs))</div><div class="line">estimator.fit(X_digits, y_digits)</div><div class="line"></div><div class="line">plt.figure(<span class="number">1</span>, figsize=(<span class="number">4</span>, <span class="number">3</span>))</div><div class="line">plt.clf()</div><div class="line">plt.axes([<span class="number">.2</span>, <span class="number">.2</span>, <span class="number">.7</span>, <span class="number">.7</span>])</div><div class="line">plt.plot(pca.explained_variance_, linewidth=<span class="number">2</span>)</div><div class="line">plt.axis(<span class="string">'tight'</span>)</div><div class="line">plt.xlabel(<span class="string">'n_components'</span>)</div><div class="line">plt.ylabel(<span class="string">'explained_variance_'</span>)</div><div class="line">plt.axvline(</div><div class="line">    estimator.best_estimator_.named_steps[<span class="string">'pca'</span>].n_components,</div><div class="line">    linestyle=<span class="string">':'</span>,</div><div class="line">    label=<span class="string">'n_components chosen'</span>)</div><div class="line">plt.legend(prop=dict(size=<span class="number">12</span>))</div><div class="line">plt.show()</div></pre></td></tr></table></figure><h2 id="è‡ªå®šä¹‰transformer"><a href="#è‡ªå®šä¹‰transformer" class="headerlink" title="è‡ªå®šä¹‰transformer"></a>è‡ªå®šä¹‰transformer</h2><p>æˆ‘ä»¬å¯ä»¥å¦‚ä¸‹è‡ªå®šä¹‰transformerï¼ˆæ¥è‡ª<a href="http://michelleful.github.io/code-blog/2015/06/20/pipelines/" target="_blank" rel="external">Using Pipelines and FeatureUnions in scikit-learn - Michelle Fullwood</a>ï¼‰</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn.base <span class="keyword">import</span> BaseEstimator, TransformerMixin</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">SampleExtractor</span><span class="params">(BaseEstimator, TransformerMixin)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, vars)</span>:</span></div><div class="line">        self.vars = vars  <span class="comment"># e.g. pass in a column name to extract</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transform</span><span class="params">(self, X, y=None)</span>:</span></div><div class="line">        <span class="keyword">return</span> do_something_to(X, self.vars)  <span class="comment"># where the actual feature extraction happens</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span><span class="params">(self, X, y=None)</span>:</span></div><div class="line">        <span class="keyword">return</span> self  <span class="comment"># generally does nothing</span></div></pre></td></tr></table></figure><p>å¦å¤–ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å¯¹æ¯ä¸ªfeatureå•ç‹¬å¤„ç†ï¼Œä¾‹å¦‚ä¸‹é¢çš„è¿™ä¸ªæ¯”è¾ƒå¤§çš„æµæ°´çº¿ï¼ˆæ¥è‡ª<a href="http://zacstewart.com/2014/08/05/pipelines-of-featureunions-of-pipelines.html" target="_blank" rel="external">Using scikit-learn Pipelines and FeatureUnions | zacstewart.com</a>ï¼‰ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°ä½œè€…çš„pipelineä¸­ï¼Œé¦–å…ˆæ˜¯ä¸€ä¸ªå«åš<code>features</code>çš„FeatureUnionï¼Œå…¶ä¸­ï¼Œæ¯ä¸ªç‰¹å¾åˆ†åˆ«ä»¥ä¸€ä¸ªpipelineæ¥å¤„ç†ï¼Œè¿™ä¸ªpipelineé¦–å…ˆæ˜¯ä¸€ä¸ª<code>ColumnExtractor</code>æå–å‡ºè¿™ä¸ªç‰¹å¾ï¼Œåç»­è¿›è¡Œä¸€ç³»åˆ—å¤„ç†è½¬æ¢ï¼Œæœ€ç»ˆè¿™äº›pipelineç»„åˆä¸ºç‰¹å¾ç»„åˆï¼Œå†å–‚ç»™ä¸€ç³»åˆ—<code>ModelTransformer</code>åŒ…è£…çš„æ¨¡å‹æ¥predictï¼Œæœ€ç»ˆä½¿ç”¨<code>KNeighborsRegressor</code>é¢„æµ‹ï¼ˆç›¸å½“äºä¸¤å±‚stackingï¼‰ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line">pipeline = Pipeline([</div><div class="line">    (<span class="string">'features'</span>, FeatureUnion([</div><div class="line">        (<span class="string">'continuous'</span>, Pipeline([</div><div class="line">            (<span class="string">'extract'</span>, ColumnExtractor(CONTINUOUS_FIELDS)),</div><div class="line">            (<span class="string">'scale'</span>, Normalizer())</div><div class="line">        ])),</div><div class="line">        (<span class="string">'factors'</span>, Pipeline([</div><div class="line">            (<span class="string">'extract'</span>, ColumnExtractor(FACTOR_FIELDS)),</div><div class="line">            (<span class="string">'one_hot'</span>, OneHotEncoder(n_values=<span class="number">5</span>)),</div><div class="line">            (<span class="string">'to_dense'</span>, DenseTransformer())</div><div class="line">        ])),</div><div class="line">        (<span class="string">'weekday'</span>, Pipeline([</div><div class="line">            (<span class="string">'extract'</span>, DayOfWeekTransformer()),</div><div class="line">            (<span class="string">'one_hot'</span>, OneHotEncoder()),</div><div class="line">            (<span class="string">'to_dense'</span>, DenseTransformer())</div><div class="line">        ])),</div><div class="line">        (<span class="string">'hour_of_day'</span>, HourOfDayTransformer()),</div><div class="line">        (<span class="string">'month'</span>, Pipeline([</div><div class="line">            (<span class="string">'extract'</span>, ColumnExtractor([<span class="string">'datetime'</span>])),</div><div class="line">            (<span class="string">'to_month'</span>, DateTransformer()),</div><div class="line">            (<span class="string">'one_hot'</span>, OneHotEncoder()),</div><div class="line">            (<span class="string">'to_dense'</span>, DenseTransformer())</div><div class="line">        ])),</div><div class="line">        (<span class="string">'growth'</span>, Pipeline([</div><div class="line">            (<span class="string">'datetime'</span>, ColumnExtractor([<span class="string">'datetime'</span>])),</div><div class="line">            (<span class="string">'to_numeric'</span>, MatrixConversion(int)),</div><div class="line">            (<span class="string">'regression'</span>, ModelTransformer(LinearRegression()))</div><div class="line">        ]))</div><div class="line">    ])),</div><div class="line">    (<span class="string">'estimators'</span>, FeatureUnion([</div><div class="line">        (<span class="string">'knn'</span>, ModelTransformer(KNeighborsRegressor(n_neighbors=<span class="number">5</span>))),</div><div class="line">        (<span class="string">'gbr'</span>, ModelTransformer(GradientBoostingRegressor())),</div><div class="line">        (<span class="string">'dtr'</span>, ModelTransformer(DecisionTreeRegressor())),</div><div class="line">        (<span class="string">'etr'</span>, ModelTransformer(ExtraTreesRegressor())),</div><div class="line">        (<span class="string">'rfr'</span>, ModelTransformer(RandomForestRegressor())),</div><div class="line">        (<span class="string">'par'</span>, ModelTransformer(PassiveAggressiveRegressor())),</div><div class="line">        (<span class="string">'en'</span>, ModelTransformer(ElasticNet())),</div><div class="line">        (<span class="string">'cluster'</span>, ModelTransformer(KMeans(n_clusters=<span class="number">2</span>)))</div><div class="line">    ])),</div><div class="line">    (<span class="string">'estimator'</span>, KNeighborsRegressor())</div><div class="line">])</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">HourOfDayTransformer</span><span class="params">(TransformerMixin)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transform</span><span class="params">(self, X, **transform_params)</span>:</span></div><div class="line">        hours = DataFrame(X[<span class="string">'datetime'</span>].apply(<span class="keyword">lambda</span> x: x.hour))</div><div class="line">        <span class="keyword">return</span> hours</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span><span class="params">(self, X, y=None, **fit_params)</span>:</span></div><div class="line">        <span class="keyword">return</span> self</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ModelTransformer</span><span class="params">(TransformerMixin)</span>:</span></div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, model)</span>:</span></div><div class="line">        self.model = model</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">fit</span><span class="params">(self, *args, **kwargs)</span>:</span></div><div class="line">        self.model.fit(*args, **kwargs)</div><div class="line">        <span class="keyword">return</span> self</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">transform</span><span class="params">(self, X, **transform_params)</span>:</span></div><div class="line">        <span class="keyword">return</span> DataFrame(self.model.predict(X))</div></pre></td></tr></table></figure><h2 id="FeatureUnion"><a href="#FeatureUnion" class="headerlink" title="FeatureUnion"></a>FeatureUnion</h2><p><a href="http://scikit-learn.org/stable/modules/generated/sklearn.pipeline.FeatureUnion.html" target="_blank" rel="external">sklearn.pipeline.FeatureUnion â€” scikit-learn 0.19.1 documentation</a> å’Œpipelineçš„åºåˆ—æ‰§è¡Œä¸åŒï¼ŒFeatureUnionæŒ‡çš„æ˜¯å¹¶è¡Œåœ°åº”ç”¨è®¸å¤štransformeråœ¨inputä¸Šï¼Œå†å°†ç»“æœåˆå¹¶ï¼Œæ‰€ä»¥è‡ªç„¶åœ°é€‚åˆç‰¹å¾å·¥ç¨‹ä¸­çš„å¢åŠ ç‰¹å¾ï¼Œè€ŒFeatureUnionä¸pipelineç»„åˆå¯ä»¥æ–¹ä¾¿çš„å®Œæˆè®¸å¤šå¤æ‚çš„æ“ä½œï¼Œä¾‹å¦‚å¦‚ä¸‹çš„ä¾‹å­ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">pipeline = Pipeline([</div><div class="line">  (<span class="string">'extract_essays'</span>, EssayExractor()),</div><div class="line">  (<span class="string">'features'</span>, FeatureUnion([</div><div class="line">    (<span class="string">'ngram_tf_idf'</span>, Pipeline([</div><div class="line">      (<span class="string">'counts'</span>, CountVectorizer()),</div><div class="line">      (<span class="string">'tf_idf'</span>, TfidfTransformer())</div><div class="line">    ])),</div><div class="line">    (<span class="string">'essay_length'</span>, LengthTransformer()),</div><div class="line">    (<span class="string">'misspellings'</span>, MispellingCountTransformer())</div><div class="line">  ])),</div><div class="line">  (<span class="string">'classifier'</span>, MultinomialNB())</div><div class="line">])</div></pre></td></tr></table></figure><p>æ•´ä¸ª<code>features</code>æ˜¯ä¸€ä¸ªFeatureUnionï¼Œè€Œå…¶ä¸­çš„ngram_tf_idfåˆæ˜¯ä¸€ä¸ªåŒ…æ‹¬ä¸¤æ­¥çš„pipelineã€‚<br><img src="/images/15233302459256.jpg" alt=""></p><p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½¿ç”¨FeatureUnionç»“åˆPCAé™ç»´åç‰¹å¾ä»¥åŠé€‰æ‹©åŸç‰¹å¾ä¸­çš„å‡ ä¸ªä½œä¸ºç‰¹å¾ç»„åˆå†å–‚ç»™SVMåˆ†ç±»ï¼Œæœ€åç”¨grid_search åšäº† pcaçš„<code>n_components</code>ã€SelectKBestçš„<code>k</code>ä»¥åŠSVMçš„<code>C</code>çš„CVã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> sklearn.pipeline <span class="keyword">import</span> Pipeline, FeatureUnion</div><div class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> GridSearchCV</div><div class="line"><span class="keyword">from</span> sklearn.svm <span class="keyword">import</span> SVC</div><div class="line"><span class="keyword">from</span> sklearn.datasets <span class="keyword">import</span> load_iris</div><div class="line"><span class="keyword">from</span> sklearn.decomposition <span class="keyword">import</span> PCA</div><div class="line"><span class="keyword">from</span> sklearn.feature_selection <span class="keyword">import</span> SelectKBest</div><div class="line"></div><div class="line">iris = load_iris()</div><div class="line"></div><div class="line">X, y = iris.data, iris.target</div><div class="line"></div><div class="line">print(X.shape, y.shape)</div><div class="line"></div><div class="line"><span class="comment"># This dataset is way too high-dimensional. Better do PCA:</span></div><div class="line">pca = PCA()</div><div class="line"></div><div class="line"><span class="comment"># Maybe some original features where good, too?</span></div><div class="line">selection = SelectKBest()</div><div class="line"></div><div class="line"><span class="comment"># Build estimator from PCA and Univariate selection:</span></div><div class="line"></div><div class="line">svm = SVC(kernel=<span class="string">"linear"</span>)</div><div class="line"></div><div class="line"><span class="comment"># Do grid search over k, n_components and C:</span></div><div class="line"></div><div class="line">pipeline = Pipeline([(<span class="string">"features"</span>,</div><div class="line">                      FeatureUnion([(<span class="string">"pca"</span>, pca), (<span class="string">"univ_select"</span>,</div><div class="line">                                                   selection)])), (<span class="string">"svm"</span>,</div><div class="line">                                                                   svm)])</div><div class="line"></div><div class="line">param_grid = dict(</div><div class="line">    features__pca__n_components=[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>],</div><div class="line">    features__univ_select__k=[<span class="number">1</span>, <span class="number">2</span>],</div><div class="line">    svm__C=[<span class="number">0.1</span>, <span class="number">1</span>, <span class="number">10</span>])</div><div class="line"></div><div class="line">grid_search = GridSearchCV(pipeline, param_grid=param_grid, verbose=<span class="number">10</span>)</div><div class="line">grid_search.fit(X, y)</div><div class="line"></div><div class="line">grid_search.best_estimator_</div><div class="line">grid_search.best_params_</div><div class="line">grid_search.best_score_</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/15231874915799.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="Data Science" scheme="http://frankchen.xyz/tags/Data-Science/"/>
    
  </entry>
  
  <entry>
    <title>VPSæ­å»ºç§äººBTç¦»çº¿æœåŠ¡å™¨</title>
    <link href="http://frankchen.xyz/2018/04/08/private-BT-server/"/>
    <id>http://frankchen.xyz/2018/04/08/private-BT-server/</id>
    <published>2018-04-08T03:13:51.000Z</published>
    <updated>2018-04-08T03:47:02.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/15231584798585.jpg" alt=""><br>ä½¿ç”¨é—²ç½®çš„VPSæ­å»ºç§äººBTç¦»çº¿æœåŠ¡å™¨çš„æ–¹æ³•ï¼Œäº¦æˆ–è€…æ¨å¹¿è‡³æ ‘è“æ´¾æˆ–è€…å®¶ç”¨è·¯ç”±å™¨äº¦å¯ã€‚<br><a id="more"></a> </p><h2 id="å®‰è£…åŠé…ç½®-Transmission"><a href="#å®‰è£…åŠé…ç½®-Transmission" class="headerlink" title="å®‰è£…åŠé…ç½® Transmission"></a>å®‰è£…åŠé…ç½® Transmission</h2><ul><li>å®‰è£… <code>sudo apt-get install transmission-daemon</code></li><li>é…ç½® åœæ­¢æœåŠ¡ï¼ˆå¦åˆ™é…ç½®æ–‡ä»¶é”å®šï¼Œæ— æ³•ä¿®æ”¹ï¼‰<code>sudo service transmission-daemon stop</code></li><li>ç¼–è¾‘é…ç½®æ–‡ä»¶</li></ul><p><code>sudo vim /etc/transmission-daemon/settings.json</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="string">"ratio-limit"</span>: 0.0100, </div><div class="line">    <span class="string">"ratio-limit-enabled"</span>: <span class="literal">true</span>,  </div><div class="line">    <span class="string">"rpc-password"</span>: <span class="string">"*******"</span>,   </div><div class="line">    <span class="string">"rpc-username"</span>: <span class="string">"frank"</span>,</div><div class="line">    <span class="string">"download-dir"</span>: <span class="string">"/var/www/html/Downloads"</span>, </div><div class="line">&#125;</div></pre></td></tr></table></figure><p> æˆ‘åªåˆ—å‡ºäº†æˆ‘ä¿®æ”¹è¿‡ä¸”æ— æ³•åœ¨ Transmission Web-GUI ä¸­æ— æ³•å®Œæˆä¿®æ”¹çš„å‡ é¡¹ï¼Œå››é¡¹ä¾æ¬¡æ˜¯ä¸‹è½½å®Œæˆåšç§ç‡ï¼Œå¼€å¯é™åˆ¶åšç§ç‡ï¼ŒWeb-GUI å¯†ç ï¼ŒWeb-GUI ç”¨æˆ·åã€‚åƒä¿å­˜è·¯å¾„ï¼Œä¸‹è½½/ ä¸Šä¼ é€Ÿåº¦é™åˆ¶ï¼Œéƒ½å¯ä»¥åœ¨ Web-GUI ä¸­ç›´æ¥è®¾å®šï¼Œä¸ºäº†æ–¹ä¾¿ä¹‹åå¯¹ä¸‹è½½æ–‡ä»¶çš„ Web ç®¡ç†ï¼Œæˆ‘ç›´æ¥å°†ä¿å­˜è·¯å¾„æ”¹åˆ°äº† Web å‘å¸ƒè·¯å¾„ä¸‹çš„ä¸€ä¸ªå­ç›®å½•ã€‚</p><p> é‡å¯æœåŠ¡</p><p> <code>sudo service transmission-daemon start</code></p><p> æ­¤æ—¶åœ¨æµè§ˆå™¨æ‰“å¼€<code>VPSçš„IPåœ°å€/åŸŸå:9091</code>å¹¶è¾“å…¥åˆšåˆšè®¾ç½®çš„ç”¨æˆ·ååŠå¯†ç åº”è¯¥å°±å¯ä»¥è®¿é—® Transmission çš„ Web-GUIäº†ã€‚<br> <img src="/images/Screen%20Shot%202018-04-08%20at%2011.25.35.png" alt="Screen Shot 2018-04-08 at 11.25.35"></p><p> å¯æ˜¯åœ¨æ·»åŠ äº†ç¬¬ä¸€ä¸ªä»»åŠ¡åå‡ºç°ä¿å­˜è·¯å¾„å†™å…¥æƒé™çš„é—®é¢˜ã€‚<br>è§£å†³åŠæ³•å¦‚<a href="https://askubuntu.com/questions/221081/permission-denied-when-downloading-with-transmission-deamon" target="_blank" rel="external">Permission denied when downloading with transmission deamon - Ask Ubuntu</a>æ‰€ç¤ºï¼š</p><p>æˆ‘ä»¬çš„ä¸‹è½½åœ°å€æ˜¯ <code>/var/www/html/Downloads</code> ç”¨æˆ·åæ˜¯<code>znwindy</code>:<br>é‚£ä¹ˆ </p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># å°†æœ¬ç”¨æˆ·åŠ å…¥ `debian-transmission`ç»„</span></div><div class="line">sudo usermod <span class="_">-a</span> -G debian-transmission znwindy</div><div class="line"><span class="comment"># æ–‡ä»¶å¤¹æ‰€æœ‰è€…</span></div><div class="line">sudo chgrp debian-transmission /var/www/html/Downloads</div><div class="line"><span class="comment"># ç»„æ·»åŠ å†™æƒé™</span></div><div class="line">sudo chmod -R 755 /var/www</div><div class="line"><span class="comment"># åœæ­¢åå°deamon </span></div><div class="line"></div><div class="line">sudo service transmission-daemon stop</div><div class="line"><span class="comment"># æ›´æ”¹ file creation mask</span></div><div class="line">sudo vim /etc/transmission-daemon/settings.json</div><div class="line"><span class="comment"># æŠŠ"umask": 18 æ”¹ä¸º "umask": 2</span></div><div class="line"><span class="comment"># é‡å¯æœåŠ¡</span></div><div class="line">sudo service transmission-daemon start</div></pre></td></tr></table></figure><p>å³å¯è§£å†³å†™çš„é—®é¢˜ã€‚</p><h2 id="é…ç½®-Apache-åŠ å¯†åŒºåŸŸ"><a href="#é…ç½®-Apache-åŠ å¯†åŒºåŸŸ" class="headerlink" title="é…ç½® Apache åŠ å¯†åŒºåŸŸ"></a>é…ç½® Apache åŠ å¯†åŒºåŸŸ</h2><p>å®‰è£…apache2</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get update</div><div class="line">sudo apt-get install apache2</div></pre></td></tr></table></figure><p>Adjust the Firewall</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">sudo ufw app list</div><div class="line">sudo ufw allow <span class="string">'Apache Full'</span></div><div class="line">sudo ufw status</div><div class="line">sudo systemctl status apache2</div></pre></td></tr></table></figure><p>å¯†ç ç”Ÿæˆ</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo htpasswd -c /etc/apache2/.htpasswd ç”¨æˆ·å</div></pre></td></tr></table></figure><p>ç„¶åä¼šè¢«æç¤ºè¾“å…¥ä¸¤æ¬¡è¯¥ â€œç”¨æˆ·åâ€ çš„å¯†ç ã€‚</p><p>ä¿®æ”¹è™šæ‹Ÿ host çš„é…ç½®æ–‡ä»¶<br><code>sudo vim /etc/apache2/sites-enabled/000-default.conf</code></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;Directory <span class="string">"/var/www/html"</span>&gt;</div><div class="line">        AuthType Basic</div><div class="line">        AuthName <span class="string">"Restricted Content"</span></div><div class="line">        AuthUserFile /etc/apache2/.htpasswd</div><div class="line">        Require valid-user</div><div class="line">&lt;/Directory&gt;</div></pre></td></tr></table></figure><p>ä¿å­˜åé‡å¯</p><p><code>sudo service apache2 restart</code></p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>é€šè¿‡ HTTP å°†ä¸‹è½½çš„ä»»åŠ¡å–å›æœ¬åœ°ï¼Œé€Ÿåº¦ä¹Ÿå¾ˆå¿«ï¼è¿™æ ·ï¼Œé€šè¿‡è®¿é—® Transmission Web-GUI â€œæŠ•å–‚â€ ç§å­ï¼Œç£åŠ›é“¾ï¼Œç„¶ååœ¨ä¸‹è½½å®Œæˆåé€šè¿‡ HTTP æ–¹å¼ä» VPS å°†èµ„æºå–å›æœ¬åœ°ï¼Œç”šè‡³ç›´æ¥å¯¹ .mp3ã€.mp4 ç­‰æ–‡ä»¶æ ¼å¼è¿›è¡Œåœ¨çº¿æ’­æ”¾ï¼Œå®ç°äº†ä¸€ä¸ªç®€åŒ–ç‰ˆçš„è¿…é›·ç¦»çº¿ä¸‹è½½ï¼Œå¯æ˜¯å®ƒå´åœ¨ä¸‹è½½æŸäº›ç‰¹å®šèµ„æºæ—¶è¿œæ¯”è¿…é›·ç¦»çº¿ç®¡ç”¨ã€‚</p><h2 id="å‚è€ƒè‡ª"><a href="#å‚è€ƒè‡ª" class="headerlink" title="å‚è€ƒè‡ª"></a>å‚è€ƒè‡ª</h2><ul><li><a href="https://zhuanlan.zhihu.com/p/24478342" target="_blank" rel="external">åœ¨ VPS ä¸Šæ­å»ºç§äººç¦»çº¿ä¸‹è½½</a></li></ul>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/15231584798585.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;ä½¿ç”¨é—²ç½®çš„VPSæ­å»ºç§äººBTç¦»çº¿æœåŠ¡å™¨çš„æ–¹æ³•ï¼Œäº¦æˆ–è€…æ¨å¹¿è‡³æ ‘è“æ´¾æˆ–è€…å®¶ç”¨è·¯ç”±å™¨äº¦å¯ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="Linux" scheme="http://frankchen.xyz/tags/Linux/"/>
    
      <category term="Old Driver" scheme="http://frankchen.xyz/tags/Old-Driver/"/>
    
  </entry>
  
  <entry>
    <title>numpy ä¸­å¢åŠ channelçš„æ–¹æ³•</title>
    <link href="http://frankchen.xyz/2018/03/29/numpy-add-channel/"/>
    <id>http://frankchen.xyz/2018/03/29/numpy-add-channel/</id>
    <published>2018-03-29T12:15:30.000Z</published>
    <updated>2018-03-29T12:48:49.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/15223277046847.jpg" alt=""><br>numpy æ•°ç»„ä¸­ä¸€ç»´æ€ä¹ˆè½¬äºŒç»´å’Œå¤šç»´ï¼Ÿç®€è¿° numpy ä¸­å¢åŠ channelçš„æ–¹æ³•ã€‚</p><a id="more"></a><p>åœ¨æœºå™¨å­¦ä¹ ä¸­ï¼Œæ‰€æœ‰çš„æ•°æ®éƒ½æ˜¯å‘é‡å’ŒçŸ©é˜µï¼Œè€Œæ€ä¹ˆæ ¹æ®æˆ‘ä»¬æ‰€è¦è§£å†³çš„é—®é¢˜æ¥è°ƒæ•´æ¨¡å‹ä»¥åŠæ•°æ®çš„æ ¼å¼ï¼Œä¹Ÿå°±æ˜¯çŸ©é˜µçš„ç»´åº¦å’Œå¤§å°æ˜¯ä¸€é¡¹é‡è¦çš„åŸºæœ¬åŠŸï¼Œé‚£ä¹ˆæœ¬æ–‡å°±å…·ä½“ä»‹ç»ä¸‹numpyä¸­æ•°ç»„çš„è½¬æ¢ï¼Œä¹Ÿå°±æ˜¯å¢åŠ channelçš„æ–¹æ³•ã€‚</p><h2 id="ä¸€ç»´è½¬äºŒç»´"><a href="#ä¸€ç»´è½¬äºŒç»´" class="headerlink" title="ä¸€ç»´è½¬äºŒç»´"></a>ä¸€ç»´è½¬äºŒç»´</h2><p>ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªä¸€ç»´çš„numpy arrayï¼Œæœ‰å¦‚ä¸‹æ–¹æ³•å¯ä»¥è½¬ä¸ºäºŒç»´</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">a = np.arange(<span class="number">10</span>)</div><div class="line">a</div><div class="line">a.shape</div><div class="line">b = a[:,<span class="keyword">None</span>]</div><div class="line">b</div><div class="line">b.shape</div><div class="line"><span class="string">'''</span></div><div class="line">array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])</div><div class="line">(10,)</div><div class="line">array([[0],</div><div class="line">       [1],</div><div class="line">       [2],</div><div class="line">       [3],</div><div class="line">       [4],</div><div class="line">       [5],</div><div class="line">       [6],</div><div class="line">       [7],</div><div class="line">       [8],</div><div class="line">       [9]])</div><div class="line">(10, 1)</div><div class="line">'''</div></pre></td></tr></table></figure><p> å¯ä»¥çœ‹åˆ°ï¼Œ<code>a</code>ç¡®å®è¢«è½¬ä¸ºäº†äºŒç»´ï¼Œä»¥ä¸‹æ–¹æ³•æ˜¯ä¸€æ ·çš„ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line">c = a[:,np.newaxis]</div><div class="line">c</div><div class="line">(c == b).all()</div><div class="line">np.newaxis == <span class="keyword">None</span></div><div class="line"><span class="string">'''</span></div><div class="line">array([[0],</div><div class="line">       [1],</div><div class="line">       [2],</div><div class="line">       [3],</div><div class="line">       [4],</div><div class="line">       [5],</div><div class="line">       [6],</div><div class="line">       [7],</div><div class="line">       [8],</div><div class="line">       [9]])</div><div class="line">True</div><div class="line">True</div><div class="line">'''</div></pre></td></tr></table></figure><h2 id="è½¬ä¸ºå¤šç»´"><a href="#è½¬ä¸ºå¤šç»´" class="headerlink" title="è½¬ä¸ºå¤šç»´"></a>è½¬ä¸ºå¤šç»´</h2><p>æ—¶é—´åºåˆ—é¢„æµ‹ä¸­ï¼Œæˆ‘ä»¬ä¸€èˆ¬éœ€è¦çš„æ˜¯(sampleï¼Œtime_stampï¼Œfeature)çš„3 ä¸ªchannelçš„æ•°æ®ï¼Œå³ä¸€ä¸ªä¸‰ç»´çŸ©é˜µï¼ŒåŒ…å«è‹¥å¹²ä¸ªsampleï¼Œæ¯ä¸ªsampleåŒ…å«è‹¥å¹²ä¸ªæ—¶é—´åºåˆ—ç‚¹ï¼Œè€Œæ¯ä¸ªæ—¶é—´åºåˆ—ç‚¹æœ‰åŒ…æ‹¬è‹¥å¹²ä¸ªfeatureï¼Œå“ªæ€•æˆ‘ä»¬åªæ˜¯åšå•å˜é‡çš„æ—¶é—´åºåˆ—é¢„æµ‹ï¼Œè¾“å…¥RNNç½‘ç»œä¾‹å¦‚LSTMçš„æ—¶å€™ï¼Œæ•°æ®ä¹Ÿå¿…é¡»æ˜¯ä¸‰ç»´çš„æ ¼å¼ï¼Œä¸‹é¢æˆ‘ä»¬è®²ä¸€è®²è¿™ä¹ˆåšçš„æ–¹æ³•ã€‚</p><p>ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªè‹¥å¹²ä¸ªæ—¶é—´ç‚¹æ¯ä¸ªæ—¶é—´ç‚¹æœ‰ä¸¤ä¸ªç‰¹å¾çš„æ•°æ®ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">a = np.arange(<span class="number">24</span>).reshape((<span class="number">-1</span>,<span class="number">2</span>))</div><div class="line">a.shape</div><div class="line">a</div><div class="line"><span class="string">'''</span></div><div class="line">(12, 2)</div><div class="line">array([[ 0,  1],</div><div class="line">       [ 2,  3],</div><div class="line">       [ 4,  5],</div><div class="line">       [ 6,  7],</div><div class="line">       [ 8,  9],</div><div class="line">       [10, 11],</div><div class="line">       [12, 13],</div><div class="line">       [14, 15],</div><div class="line">       [16, 17],</div><div class="line">       [18, 19],</div><div class="line">       [20, 21],</div><div class="line">       [22, 23]])</div><div class="line">'''</div></pre></td></tr></table></figure><p>æˆ‘ä»¬å°†aè½¬åŒ–ä¸ºä¸‰ä¸ªchannelï¼Œå³å¯ä»¥</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">b = a[:,<span class="keyword">None</span>,:]</div><div class="line">b.shape</div><div class="line">b</div><div class="line"><span class="string">'''</span></div><div class="line">(12, 1, 2)</div><div class="line">array([[[ 0,  1]],</div><div class="line"></div><div class="line">       [[ 2,  3]],</div><div class="line"></div><div class="line">       [[ 4,  5]],</div><div class="line"></div><div class="line">       [[ 6,  7]],</div><div class="line"></div><div class="line">       [[ 8,  9]],</div><div class="line"></div><div class="line">       [[10, 11]],</div><div class="line"></div><div class="line">       [[12, 13]],</div><div class="line"></div><div class="line">       [[14, 15]],</div><div class="line"></div><div class="line">       [[16, 17]],</div><div class="line"></div><div class="line">       [[18, 19]],</div><div class="line"></div><div class="line">       [[20, 21]],</div><div class="line"></div><div class="line">       [[22, 23]]])</div><div class="line">       '''</div></pre></td></tr></table></figure><p>ä»¥ä¸Šå¯¹åº”ç€pandasçš„Dataframeï¼ŒåŠæˆ‘ä»¬å¯¹Dataframeå–valueså±æ€§ï¼Œä¼šå¾—åˆ°ä¸€ä¸ªäºŒç»´çŸ©é˜µï¼Œåšæ³•å°±å¦‚åŒä¸Šé¢ä¸€æ ·ï¼Œä½†æ˜¯å¦‚æœæ˜¯Seriesçš„è¯ï¼Œå–valueså±æ€§å¾—åˆ°çš„æ˜¯ä¸€ä¸ªä¸€ç»´çš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬çš„åšæ³•åˆ™æ˜¯ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">c = np.arange(<span class="number">12</span>)</div><div class="line">c</div><div class="line">d = c[:,<span class="keyword">None</span>,<span class="keyword">None</span>]</div><div class="line">d.shape</div><div class="line">d</div><div class="line"><span class="string">'''</span></div><div class="line">array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])</div><div class="line">(12, 1, 1)</div><div class="line">array([[[ 0]],</div><div class="line"></div><div class="line">       [[ 1]],</div><div class="line"></div><div class="line">       [[ 2]],</div><div class="line"></div><div class="line">       [[ 3]],</div><div class="line"></div><div class="line">       [[ 4]],</div><div class="line"></div><div class="line">       [[ 5]],</div><div class="line"></div><div class="line">       [[ 6]],</div><div class="line"></div><div class="line">       [[ 7]],</div><div class="line"></div><div class="line">       [[ 8]],</div><div class="line"></div><div class="line">       [[ 9]],</div><div class="line"></div><div class="line">       [[10]],</div><div class="line"></div><div class="line">       [[11]]])</div><div class="line">'''</div></pre></td></tr></table></figure><h2 id="å‡å°‘ç»´åº¦"><a href="#å‡å°‘ç»´åº¦" class="headerlink" title="å‡å°‘ç»´åº¦"></a>å‡å°‘ç»´åº¦</h2><p>è‹¥è¦å‡å°‘æ•°æ®çš„ç»´åº¦ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨çš„æ–¹æ³•å¦‚ä¸‹ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div></pre></td><td class="code"><pre><div class="line">d = np.arange(<span class="number">12</span>)[:,<span class="keyword">None</span>,<span class="keyword">None</span>]</div><div class="line">d.shape</div><div class="line">d</div><div class="line">e = np.squeeze(d)</div><div class="line">e.shape</div><div class="line">e</div><div class="line"><span class="string">'''(12, 1, 1)</span></div><div class="line">array([[[ 0]],</div><div class="line"></div><div class="line">       [[ 1]],</div><div class="line"></div><div class="line">       [[ 2]],</div><div class="line"></div><div class="line">       [[ 3]],</div><div class="line"></div><div class="line">       [[ 4]],</div><div class="line"></div><div class="line">       [[ 5]],</div><div class="line"></div><div class="line">       [[ 6]],</div><div class="line"></div><div class="line">       [[ 7]],</div><div class="line"></div><div class="line">       [[ 8]],</div><div class="line"></div><div class="line">       [[ 9]],</div><div class="line"></div><div class="line">       [[10]],</div><div class="line"></div><div class="line">       [[11]]])</div><div class="line">(12,)</div><div class="line">array([ 0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11])'''</div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/15223277046847.jpg&quot; alt=&quot;&quot;&gt;&lt;br&gt;numpy æ•°ç»„ä¸­ä¸€ç»´æ€ä¹ˆè½¬äºŒç»´å’Œå¤šç»´ï¼Ÿç®€è¿° numpy ä¸­å¢åŠ channelçš„æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://frankchen.xyz/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>python æ­£åˆ™å®ç”¨ä¾‹å­</title>
    <link href="http://frankchen.xyz/2018/02/24/re-basic-of-python/"/>
    <id>http://frankchen.xyz/2018/02/24/re-basic-of-python/</id>
    <published>2018-02-24T10:52:00.000Z</published>
    <updated>2018-02-24T11:09:45.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/15194705842254.png" alt=""></p><p>æœ¬æ–‡ä¸»è¦å…³äºpythonçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¦å·ä¸æ–¹æ³•ã€‚</p><a id="more"></a><ul><li>findall: æ‰¾å¯»æ‰€æœ‰åŒ¹é…ï¼Œè¿”å›æ‰€æœ‰ç»„åˆçš„åˆ—è¡¨</li><li>search: æ‰¾å¯»ç¬¬ä¸€ä¸ªåŒ¹é…å¹¶è¿”å›</li><li>sub: æ›¿æ¢ç¬¦åˆè§„å¾‹çš„å†…å®¹ï¼Œå¹¶è¿”å›æ›¿æ¢åçš„å†…å®¹</li></ul><p><strong>.</strong>ï¼šåŒ¹é…é™¤äº†æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a = <span class="string">'xy123'</span></div><div class="line">b = re.findall(<span class="string">'x...'</span>,a)</div><div class="line">print(b)</div><div class="line"><span class="comment"># ['xy12']</span></div></pre></td></tr></table></figure><p><strong>*</strong>ï¼šåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦0æ¬¡æˆ–è€…æ— é™æ¬¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a = <span class="string">'xyxy123'</span></div><div class="line">b = re.findall(<span class="string">'x*'</span>,a)</div><div class="line">print(b)</div><div class="line"><span class="comment"># ['x', '', 'x', '', '', '', '', '']</span></div></pre></td></tr></table></figure><p><strong>?</strong>ï¼šåŒ¹é…å‰ä¸€ä¸ªå­—ç¬¦0æ¬¡æˆ–è€…1æ¬¡</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">a = <span class="string">'xy123'</span></div><div class="line">b = re.findall(<span class="string">'x?'</span>,a)</div><div class="line">print(b)</div><div class="line"><span class="comment"># ['x', '', '', '', '', '']</span></div></pre></td></tr></table></figure><p><strong>.*</strong>ï¼šè´ªå¿ƒç®—æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">b = re.findall(<span class="string">'xx.*xx'</span>,secret_code)</div><div class="line">print(b)</div><div class="line"><span class="comment"># ['xxIxxfasdjifja134xxlovexx23345sdfxxyouxx']</span></div></pre></td></tr></table></figure><p><strong>.*?</strong>ï¼šéè´ªå¿ƒç®—æ³•</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">c = re.findall(<span class="string">'xx.*?xx'</span>,secret_code)</div><div class="line">print(c)</div><div class="line"><span class="comment"># ['xxIxx', 'xxlovexx', 'xxyouxx']</span></div></pre></td></tr></table></figure><p><strong>()</strong>ï¼šæ‹¬å·å†…ç»“æœè¿”å›</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">d = re.findall(<span class="string">'xx(.*?)xx'</span>,secret_code)</div><div class="line">print(d)</div><div class="line"><span class="keyword">for</span> each <span class="keyword">in</span> d:</div><div class="line">    print(each)</div><div class="line"><span class="comment"># ['I', 'love', 'you']</span></div><div class="line"><span class="comment"># I</span></div><div class="line"><span class="comment"># love</span></div><div class="line"><span class="comment"># you</span></div></pre></td></tr></table></figure><p><strong>re.S</strong>ä½¿å¾—.çš„ä½œç”¨åŸŸåŒ…æ‹¬æ¢è¡Œç¬¦â€\nâ€</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">s = <span class="string">'''sdfxxhello</span></div><div class="line">xxfsdfxxworldxxasdf'''</div><div class="line"></div><div class="line">d = re.findall(<span class="string">'xx(.*?)xx'</span>,s,re.S)</div><div class="line">print(d)</div><div class="line"><span class="comment">#  ['hello\n', 'world']</span></div></pre></td></tr></table></figure><p>å¯¹æ¯”findallä¸searchçš„åŒºåˆ«</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">s2 = <span class="string">'asdfxxIxx123xxlovexxdfd'</span></div><div class="line">f = re.search(<span class="string">'xx(.*?)xx123xx(.*?)xx'</span>,s2).group(<span class="number">2</span>)</div><div class="line">print(f)</div><div class="line">f2 = re.findall(<span class="string">'xx(.*?)xx123xx(.*?)xx'</span>,s2)</div><div class="line">print(f2[<span class="number">0</span>][<span class="number">1</span>])</div><div class="line"><span class="comment"># love</span></div><div class="line"><span class="comment"># love</span></div></pre></td></tr></table></figure><p>è™½ç„¶ä¸¤è€…ç»“æœç›¸åŒï¼Œä½†æ˜¯searchæ˜¯æ­é…groupæ¥å¾—åˆ°ç¬¬äºŒä¸ªåŒ¹é…ï¼Œè€Œfindallçš„ç»“æœæ˜¯[(â€˜Iâ€™, â€˜loveâ€™)]ï¼ŒåŒ…å«å…ƒç»„çš„åˆ—è¡¨ï¼Œæ‰€ä»¥éœ€è¦f2[0][1]æ¥å¼•å…¥ã€‚</p><p><strong>sub</strong>çš„ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">s = <span class="string">'123rrrrr123'</span></div><div class="line">output = re.sub(<span class="string">'123(.*?)123'</span>,<span class="string">'123%d123'</span>%<span class="number">789</span>,s)</div><div class="line">print(output)</div><div class="line"><span class="comment"># 123789123</span></div></pre></td></tr></table></figure><p>ä¾‹å¦‚æˆ‘ä»¬éœ€è¦å°†æ–‡æ¡£ä¸­çš„æ‰€æœ‰çš„pngå›¾ç‰‡æ”¹å˜è·¯å¾„ï¼Œå³éœ€è¦æ‰¾åˆ°æ‰€æœ‰çš„<code>.png</code>ç»“å°¾ï¼Œå†å°†å…¶éƒ½åŠ ä¸Šè·¯å¾„ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">multiply</span><span class="params">(m)</span>:</span></div><div class="line">    <span class="comment"># Convert group 0 to an integer.</span></div><div class="line">    v = m.group(<span class="number">0</span>)</div><div class="line">    print(v)</div><div class="line">    <span class="comment"># Multiply integer by 2.</span></div><div class="line">    <span class="comment"># ... Convert back into string and return it.</span></div><div class="line">    print(<span class="string">'basic/'</span>+v)</div><div class="line">    <span class="keyword">return</span> <span class="string">'basic/'</span>+v</div></pre></td></tr></table></figure><p>ç»“æœå¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span>autoencoder.png</div><div class="line">    basic/autoencoder.png</div><div class="line">    RNN.png</div><div class="line">    basic/RNN.png</div><div class="line">    rnn_step_forward.png</div><div class="line">    basic/rnn_step_forward.png</div><div class="line">    rnns.png</div><div class="line">    basic/rnns.png</div><div class="line">    rnn_cell_backprop.png</div><div class="line">    basic/rnn_cell_backprop.png</div><div class="line">    LSTM.png</div><div class="line">    basic/LSTM.png</div><div class="line">    LSTM_rnn.png</div><div class="line">    basic/LSTM_rnn.png</div><div class="line">    attn_mechanism.png</div><div class="line">    basic/attn_mechanism.png</div><div class="line">    attn_model.png</div><div class="line">    basic/attn_model.png</div></pre></td></tr></table></figure><p>ä»¿ç…§ä¸Šé¢æ¡ˆä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„å¯¹æˆ‘ä»¬çš„ä»»åŠ¡è¿›è¡Œå®šåˆ¶ã€‚</p><p><strong>subn</strong> ç›¸æ¯”subï¼Œsubnè¿”å›å…ƒç»„ï¼Œç¬¬äºŒä¸ªå…ƒç´ è¡¨ç¤ºæ›¿æ¢å‘ç”Ÿçš„æ¬¡æ•°ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> re</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">add</span><span class="params">(m)</span>:</span></div><div class="line">    <span class="comment"># Convert.</span></div><div class="line">    v = int(m.group(<span class="number">0</span>))</div><div class="line">    <span class="comment"># Add 2.</span></div><div class="line">    <span class="keyword">return</span> str(v + <span class="number">1</span>)</div><div class="line"></div><div class="line"><span class="comment"># Call re.subn.</span></div><div class="line">result = re.subn(<span class="string">"\d+"</span>, add, <span class="string">"1 2 3 4 5"</span>)</div><div class="line"></div><div class="line">print(<span class="string">"Result string:"</span>, result[<span class="number">0</span>])</div><div class="line">print(<span class="string">"Number of substitutions:"</span>, result[<span class="number">1</span>])</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&gt;&gt;&gt; </span></div><div class="line">Result string: <span class="number">11</span> <span class="number">21</span> <span class="number">31</span> <span class="number">41</span> <span class="number">51</span></div><div class="line">Number of substitutions: <span class="number">5</span></div></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/15194705842254.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;æœ¬æ–‡ä¸»è¦å…³äºpythonçš„æ­£åˆ™è¡¨è¾¾å¼çš„ç¬¦å·ä¸æ–¹æ³•ã€‚&lt;/p&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://frankchen.xyz/tags/python/"/>
    
      <category term="re" scheme="http://frankchen.xyz/tags/re/"/>
    
  </entry>
  
  <entry>
    <title>Tex å†™ï¼ˆä¸­æ–‡ï¼‰æ¯•ä¸šè®ºæ–‡å…¨æ”»ç•¥</title>
    <link href="http://frankchen.xyz/2018/02/08/Writing-Graduation-Thesis-in-Tex/"/>
    <id>http://frankchen.xyz/2018/02/08/Writing-Graduation-Thesis-in-Tex/</id>
    <published>2018-02-07T17:36:41.000Z</published>
    <updated>2018-02-07T18:11:41.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/15180252634406.png" alt=""></p><p>ç”¨ Tex å†™ï¼ˆä¸­æ–‡ï¼‰æ¯•ä¸šè®ºæ–‡å…¨æ”»ç•¥ï¼Œé«˜æ•ˆã€ä¾¿æ·ã€ä¼˜é›…ï¼</p><a id="more"></a><p>è¿™é‡Œæˆ‘ä»¬å¹¶ä¸å­˜åœ¨é„™è§†é“¾ï¼Œè¯´ä»€ä¹ˆTex ä¼˜äº Wordä¹‹ç±»çš„ï¼Œå…¶å®Wordä½œä¸ºæå…¶å¤æ‚çš„æ–‡æœ¬å¤„ç†è½¯ä»¶ï¼Œæˆ‘ç›¸ä¿¡Texèƒ½åšåˆ°çš„ï¼ŒWordä¸€å®šæœ‰å…¶å®ç°æ–¹å¼ï¼Œåªä¸è¿‡å¤§éƒ¨åˆ†äººéƒ½åªä¼šç”¨åˆ°Wordçš„ä¸€å°éƒ¨åˆ†åŠŸèƒ½ï¼Œç›¸æ¯”Wordï¼ŒTexè§£å†³æ–¹æ¡ˆæ›´åŠ ä¾¿æ·ä¼˜é›…ï¼Œæ¯”å¦‚è‡ªåŠ¨æ’å·ï¼ˆç« èŠ‚ã€è¡¨æ ¼ã€å‚è€ƒæ–‡çŒ®çš„ç¼–å·ï¼‰ï¼Œå…¨å±€è®¾ç½®çš„å­—ä½“ã€é—´è·æ ¼å¼ç­‰ç­‰ã€‚ç›¸æ¯”Wordäº‹æ— å·¨ç»†çš„ç»´æŠ¤ä¿®æ”¹æˆæœ¬ï¼ŒTex çš„è§£å†³æ–¹æ¡ˆæ›´åŠ programmerï¼Œå³è½¯ä»¶å¼€å‘ï¼ŒåæœŸä¸»è¦å·¥ä½œæ˜¯è¿­ä»£ç»´æŠ¤ï¼Œè‹¥èƒ½åœ¨å‰æœŸå³è€ƒè™‘è¿™ç‚¹ï¼ŒåæœŸèƒ½çœä¸‹æå¤šçš„è„‘ç»†èƒå’Œç²¾åŠ›ã€‚å¥½äº†ä¸è¯´å¤šï¼Œå‘è½¦å§~</p><h2 id="æ€»è®º"><a href="#æ€»è®º" class="headerlink" title="æ€»è®º"></a>æ€»è®º</h2><p> æ€»ä½“æ¥è¯´ï¼Œæ˜¯ç”¨ä¸Šäº¤Texæ¨¡æ¿ç»“åˆAtomç¼–è¾‘å™¨åœ¨æœ¬åœ°ç¼–è¾‘<a href="https://atom.io/" target="_blank" rel="external">Atom</a>ï¼ˆè¿™ä¸ªç”¨ä»€ä¹ˆç¼–è¾‘å™¨éšæ„ï¼‰ä»¥åŠDropboxåŒæ­¥åˆ°äº‘ç«¯<a href="https://www.dropbox.com/h" target="_blank" rel="external">Dropbox</a>ä»¥åŠäº‘ç«¯ä¸Šåœ¨sharelatexæœåŠ¡å™¨ä¸Šå³æ—¶ç¼–è¯‘æ‰€è§å³æ‰€å¾—ã€‚</p><h2 id="å·¥å…·ä½¿ç”¨æ–¹æ³•"><a href="#å·¥å…·ä½¿ç”¨æ–¹æ³•" class="headerlink" title="å·¥å…·ä½¿ç”¨æ–¹æ³•"></a>å·¥å…·ä½¿ç”¨æ–¹æ³•</h2><p>é¦–å…ˆæˆ‘ä»¬åœ¨sharelatexå®˜ç½‘<a href="https://www.sharelatex.com/project" target="_blank" rel="external">Your Projects - ShareLaTeX, Online LaTeX Editor</a>æ³¨å†Œè´¦å·ï¼Œå…è´¹è´¦å·å³å¯ï¼Œå¦‚æœéœ€è¦å¤šäººåä½œå¯ä»¥ç”¨é‚€è¯·å°å·çš„æ–¹å¼è®©è‡ªå·±å¢åŠ æƒé™ï¼ˆsharelatexæ–°å»ºè´¦å·ä¸éªŒè¯é‚®ç®±ã€‚ã€‚æ‰€ä»¥ä½ æ‡‚çš„ï¼‰ï¼Œæ¥ä¸‹æ¥åœ¨ä¸Šäº¤æ¨¡æ¿<a href="https://github.com/sjtug/SJTUThesis" target="_blank" rel="external">sjtug/SJTUThesis: ä¸Šæµ·äº¤é€šå¤§å­¦ XeLaTeX å­¦ä½è®ºæ–‡æ¨¡æ¿ A XeLaTeX template for Shanghai Jiao Tong University (SJTU) thesis.</a>å¤„ç‚¹å‡»æ­¤å¤„æ·»åŠ æœ€æ–°ç‰ˆæ¨¡æ¿åˆ°æˆ‘ä»¬çš„sharelatexé¡¹ç›®ï¼Œ<br><img src="/images/Screen%20Shot%202018-02-08%20at%2001.58.25.png" alt="Screen Shot 2018-02-08 at 01.58.25"></p><p><img src="/images/Screen%20Shot%202018-02-08%20at%2001.58.56.png" alt="Screen Shot 2018-02-08 at 01.58.56"></p><p>å¦‚å›¾ï¼Œå†ç‚¹è¿›å»ï¼Œå…ˆåˆ«æ€¥ç€ä¿®æ”¹ï¼Œæˆ‘ä»¬å…ˆè®¾ç½®ä¸ªç½‘ç›˜åŒæ­¥ï¼ŒDropboxéœ€è¦æ¢¯å­ï¼Œåœ¨sharelatexçš„è´¦å·è®¾ç½®å¤„é“¾æ¥åˆ°Dropboxï¼Œ<br><img src="/images/Screen%20Shot%202018-02-08%20at%2002.00.57.png" alt="Screen Shot 2018-02-08 at 02.00.57"></p><p>åŒæ—¶Dropboxå®‰è£…ä¸€ä¸ªæ¡Œé¢ç‰ˆï¼Œéœ€è¦è®¾ç½®ä»£ç†ï¼Œ<br><img src="/images/Screen%20Shot%202018-02-08%20at%2002.02.29.png" alt="Screen Shot 2018-02-08 at 02.02.29"><br>å¦‚å›¾ï¼Œæˆ‘ä»¬ä½¿ç”¨ssä½œä¸ºä»£ç†ã€‚</p><p>æ¥ä¸‹æ¥å®‰è£…Atomç¼–è¾‘å™¨ï¼Œåœ¨æ’ä»¶é‡Œè£…ä¸€ä¸ªå¦‚ä¸‹æ’ä»¶ï¼Œè¿™é‡Œæˆ‘ä»¬éœ€è¦å®ƒåªæ˜¯ä¸ºäº†æ³¨é‡Šè¿™ä¸€ä¸ªåŠŸèƒ½ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦æœ¬åœ°ç¼–è¯‘ã€‚<br><img src="/images/Screen%20Shot%202018-02-08%20at%2002.03.38.png" alt="Screen Shot 2018-02-08 at 02.03.38"></p><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°±å¯ä»¥åœ¨æœ¬åœ°ç”¨Atomç¼–è¾‘Dropboxç½‘ç›˜åœ¨æœ¬åœ°çš„Texé¡¹ç›®ï¼Œåªè¦æˆ‘ä»¬ä¿å­˜ï¼ŒDropboxå°±ä¼šåŒæ­¥åˆ°sharelatexï¼Œå¦‚æœå¼€å¯è‡ªåŠ¨ç¼–è¯‘äº‘ç«¯å°±ä¼šå±•ç¤ºå½“ä¸‹ç¼–è¯‘çš„PDFæ•ˆæœï¼Œå¦‚å›¾<br><img src="/images/Screen%20Shot%202018-02-08%20at%2002.07.11.png" alt="Screen Shot 2018-02-08 at 02.07.11"></p><h2 id="Texæ¨¡æ¿ä½¿ç”¨è¯´æ˜"><a href="#Texæ¨¡æ¿ä½¿ç”¨è¯´æ˜" class="headerlink" title="Texæ¨¡æ¿ä½¿ç”¨è¯´æ˜"></a>Texæ¨¡æ¿ä½¿ç”¨è¯´æ˜</h2><p>è¯¦è§æ­¤å¤„<a href="http://sjtug.org/SJTUThesis/README.pdf" target="_blank" rel="external">README.pdf</a>ï¼Œä¸»è¦æ€è·¯å°±æ˜¯æŠŠå„ç« ã€æ‘˜è¦ã€å‚è€ƒæ–‡çŒ®ç­‰åˆ†ä¸ºä¸åŒçš„texæ–‡ä»¶ï¼Œå›¾è¡¨ç­‰èµ„æºæ”¾åœ¨ä¸€å¤„æ–‡ä»¶å¤¹å†…ï¼Œé€ä¸ªå¼•ç”¨ï¼Œæœ‰å…¨å±€çš„çš„è®¾ç½®æ–‡ä»¶ï¼Œç¼–è¯‘æ—¶å°†è¿™äº›é›¶ä»¶æ‹¼æ¥ä¸ºpdfï¼Œåç»­ä¼šæ·»åŠ æ›´å¤šå¿ƒå¾—ã€‚</p><h2 id="èµ„æ–™"><a href="#èµ„æ–™" class="headerlink" title="èµ„æ–™"></a>èµ„æ–™</h2><ol><li><a href="https://math.meta.stackexchange.com/questions/5020/mathjax-basic-tutorial-and-quick-reference" target="_blank" rel="external">MathJax basic tutorial and quick reference - Mathematics Meta Stack Exchange</a>ï¼šä¸€ä¸ªå¸¸ç”¨Latexå…¬å¼ç¬¦å·çš„å…¨é›†</li><li>å¦‚æœä¸Šé¢æ²¡æ‰¾åˆ°ï¼Œå¯ä»¥è¯•è¯•è¿™é‡Œï¼Œæ‰‹å†™è¯†åˆ«latexå­—ç¬¦<a href="http://detexify.kirelabs.org/classify.html" target="_blank" rel="external">Detexify LaTeX handwritten symbol recognition</a></li></ol>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/15180252634406.png&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç”¨ Tex å†™ï¼ˆä¸­æ–‡ï¼‰æ¯•ä¸šè®ºæ–‡å…¨æ”»ç•¥ï¼Œé«˜æ•ˆã€ä¾¿æ·ã€ä¼˜é›…ï¼&lt;/p&gt;
    
    </summary>
    
    
      <category term="Tex" scheme="http://frankchen.xyz/tags/Tex/"/>
    
  </entry>
  
  <entry>
    <title>ç†è§£TSNEç®—æ³•</title>
    <link href="http://frankchen.xyz/2018/01/30/Understanding-TSNE/"/>
    <id>http://frankchen.xyz/2018/01/30/Understanding-TSNE/</id>
    <published>2018-01-30T03:39:39.000Z</published>
    <updated>2018-01-30T08:17:42.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/images/15172836269060.jpg" alt=""></p><p>ç»“åˆ<a href="http://lvdmaaten.github.io/publications/papers/JMLR_2008.pdf" target="_blank" rel="external">è®ºæ–‡</a>å…¬å¼ä¸å‡ ä¸ªpythonå®ç°ç†è§£t-SNEç®—æ³•ã€‚<br><a id="more"></a></p><p>t-SNE æ˜¯ä¸€ç§æ•°æ®å¯è§†åŒ–å·¥å…·ï¼Œå®ƒå¯ä»¥å°†é«˜ç»´æ•°æ®é™ç»´åˆ°2-3ç»´ä»¥ç”¨äºç”»å›¾ï¼Œå±€éƒ¨ç›¸ä¼¼æ€§è¢«è¿™ç§embeddingæ‰€ä¿ç•™ã€‚</p><p>t-SNEæŠŠåŸç©ºé—´çš„æ•°æ®ç‚¹ä¹‹é—´çš„è·ç¦»è½¬æ¢ä¸ºé«˜æ–¯åˆ†å¸ƒæ¦‚ç‡ï¼Œå¦‚æœä¸¤ç‚¹åœ¨é«˜ç»´ç©ºé—´è·ç¦»è¶Šè¿‘ï¼Œé‚£ä¹ˆè¿™ä¸ªæ¦‚ç‡å€¼è¶Šå¤§ã€‚æ³¨æ„åˆ°é«˜æ–¯åˆ†å¸ƒçš„è¿™ä¸ªæ ‡å‡†å·®$\sigma_i$ å¯¹æ¯ä¸ªç‚¹éƒ½æ˜¯ä¸åŒçš„ï¼Œè¿™ä¹Ÿæ˜¯ç®—æ³•çš„åˆ›æ–°ç‚¹ä¹‹ä¸€ï¼Œå› ä¸ºç†è®ºä¸Šç©ºé—´ä¸åŒä½ç½®çš„ç‚¹çš„å¯†åº¦æ˜¯ä¸åŒçš„ï¼Œæ¡ä»¶æ¦‚ç‡å¦‚æ­¤è®¡ç®—ï¼Œ</p><p>$$p_{j|i} = \frac{\exp{(-d(\boldsymbol{x}_i, \boldsymbol{x}_j) / (2 \sigma_i^2)})}{\sum_{i \neq k} \exp{(-d(\boldsymbol{x}_i, \boldsymbol{x}_k) / (2 \sigma_i^2)})}, \quad p_{i|i} = 0,$$<br><img src="/images/Screen%20Shot%202018-01-30%20at%2015.18.45.png" alt="Screen Shot 2018-01-30 at 15.18.45"></p><p>å›¾ä¸­å…¬å¼æ˜¯ç†è®ºæ–¹å¼ï¼Œå®é™…æ˜¯å…ˆè®¡ç®—æ¡ä»¶æ¦‚ç‡å†ç”¨ä¸‹é¢å…¬å¼æ¥äº§ç”Ÿè”åˆåˆ†å¸ƒï¼Œ</p><p>$$p_{ij} = \frac{p_{j|i} + p_{i|j}}{2N}.$$</p><p>å…¶ä¸­ $\sigma_i$ å°†è‡ªåŠ¨ç¡®å®šã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥é€šè¿‡è®¾ç½®ç®—æ³•çš„å›°æƒ‘æ€§æ¥å½±å“ã€‚</p><p>ç”¨ä¸€ä¸ªé•¿å°¾åˆ†å¸ƒ(Student-t Distributionï¼Œç®€ç§°ä¸ºtåˆ†å¸ƒ)æ¥è¡¨ç¤º embedç©ºé—´çš„ç›¸ä¼¼æ€§<br>$$q_{ij} = \frac{(1 + ||\boldsymbol{y}_i - \boldsymbol{y}_j)||^2)^{-1}}{\sum_{k \neq l} (1 + ||\boldsymbol{y}_k - \boldsymbol{y}_l)||^2)^{-1}},$$<br><img src="/images/Screen%20Shot%202018-01-30%20at%2015.28.56.png" alt="Screen Shot 2018-01-30 at 15.28.56"></p><p>æŸå¤±å‡½æ•°æ˜¯ä¸¤ä¸ªåˆ†å¸ƒä¹‹é—´çš„ Kullback-Leibler divergenceï¼ˆKLæ•£åº¦ï¼‰</p><p>$$KL(P|Q) = \sum_{i \neq j} p_{ij} \log \frac{p_{ij}}{q_{ij}}$$</p><p>è€Œä¸ºä»€ä¹ˆè¯´tsneä¿ç•™çš„æ˜¯å±€éƒ¨ç›¸ä¼¼æ€§å‘¢ï¼Ÿæˆ‘ä»¬ä»KLæ•£åº¦çš„å…¬å¼å‡ºå‘æ¥è§£é‡Šï¼Œ<br><img src="/images/Screen%20Shot%202018-01-30%20at%2015.33.19.png" alt="Screen Shot 2018-01-30 at 15.33.19"><br>å¯ä»¥çœ‹åˆ°ï¼Œå½“$p_{ij}$å¾ˆå¤§è€Œ$q_{ij}$å¾ˆå°ï¼ˆé«˜ç»´ç©ºé—´è·ç¦»è¿‘ï¼Œä½ç»´ç©ºé—´è·ç¦»è¿œï¼‰æƒ©ç½šå¾ˆå¤§ï¼Œåä¹‹æƒ©ç½šå°ï¼ˆé«˜ç»´ç©ºé—´è·ç¦»è¿œï¼Œä½ç»´ç©ºé—´è·ç¦»è¿‘ï¼‰ã€‚</p><p>è€Œä¸ºä»€ä¹ˆé«˜ç»´ç©ºé—´ç”¨é«˜æ–¯åˆ†å¸ƒï¼Œä½ç»´ç©ºé—´ç”¨Student-t Distributionå‘¢ï¼Ÿ</p><p><img src="/images/Screen%20Shot%202018-01-30%20at%2015.41.32.png" alt="Screen Shot 2018-01-30 at 15.41.32"><img src="/images/Screen%20Shot%202018-01-30%20at%2015.41.43.png" alt="Screen Shot 2018-01-30 at 15.41.43"><br>åŸå› å°±æ˜¯å› ä¸ºé™ç»´æ˜¯å¿…ç„¶è¦å¸¦æ¥ä¿¡æ¯æŸå¤±ï¼Œæˆ‘ä»¬è¦ä¿å­˜å±€éƒ¨ä¿¡æ¯é‚£ä¹ˆå¿…ç„¶è¦æŸå¤±å…¨å±€ä¿¡æ¯ï¼Œæ¯”å¦‚æˆ‘ä»¬è¦æŠŠä¸Šé¢çš„è¿™ä¸ª2ç»´ç©ºé—´çš„ä¸‰ä¸ªæˆç›´è§’è¾¹çš„ç‚¹é™ç»´åˆ°1ç»´ï¼Œé‚£ä¹ˆæŠŠå®ƒä»¬æ”¾å¹³å°±ä¿å­˜äº†å±€éƒ¨ä¿¡æ¯ï¼ˆå·¦ä¸­å’Œä¸­å³ä¹‹é—´çš„è·ç¦»ä¿æŒä¸å˜ï¼‰ï¼Œä½†æ˜¯ç‰ºç‰²äº†å…¨å±€ä¿¡æ¯ï¼ˆå·¦å³ä¹‹é—´çš„è·ç¦»å˜å¤§äº†ï¼‰ã€‚è€ŒStudent-t Distributionå°±èƒ½æ”¾å¤§è¿™ç§å¯†åº¦ï¼Œå¦‚ä¸‹å›¾ï¼ˆtsneé»˜è®¤tåˆ†å¸ƒè‡ªç”±åº¦ä¸º1ï¼‰ï¼Œtåˆ†å¸ƒç›¸æ¯”é«˜æ–¯åˆ†å¸ƒæ›´åŠ é•¿å°¾ã€‚<br><img src="/images/Screen%20Shot%202018-01-30%20at%2015.48.47.png" alt="Screen Shot 2018-01-30 at 15.48.47"><br>æ¢¯åº¦è®¡ç®—æ—¶æœ‰ä¼˜åŒ–æŠ€å·§ï¼Œå¦‚æœæŒ‰ä¸‹å›¾ä¸­çš„åŸå…¬å¼è®¡ç®—ï¼Œå¤æ‚åº¦ä¸º$O(N^2)$ Barnes-Hut æ ‘æ–¹æ³•å°±å¯ä»¥ä¼˜åŒ–åˆ°$ O(NlogN)$<br><img src="/images/Screen%20Shot%202018-01-30%20at%2015.59.02.png" alt="Screen Shot 2018-01-30 at 15.59.02"><br><img src="/images/Screen%20Shot%202018-01-30%20at%2016.01.17.png" alt="Screen Shot 2018-01-30 at 16.01.17"><br>åŸç†ç±»ä¼¼äºç”¨ä¸Šå›¾ä¸­ABCä¸‰ç‚¹ä¸­å¿ƒçš„è·ç¦»ä¹˜ä»¥ä¸‰æ¥ä»£æ›¿è®¡ç®—ä¸‰è€…å„è‡ªçš„è·ç¦»ã€‚<br>é‚£ä¹ˆæŠŠç”¨barnesæ ‘ç»“æ„æ¥è¿›è¡Œæ·±åº¦ä¼˜å…ˆæœç´¢ï¼Œåˆ†åˆ«åˆ¤æ–­å…¶è·ç¦»æ˜¯å¦å¤§äºé˜ˆå€¼ï¼Œåˆ†å—è®¡ç®—è·ç¦»ï¼Œè¿™æ ·å¤æ‚åº¦å°±é™ä½äº†ã€‚<br><img src="/images/Screen%20Shot%202018-01-30%20at%2016.01.38.png" alt="Screen Shot 2018-01-30 at 16.01.38"></p><p>ä»¥ä¸‹æ˜¯è®¡ç®—æŸå¤±KLæ•£åº¦çš„å…¬å¼ï¼Œ</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_kl_divergence</span><span class="params">(params, P, degrees_of_freedom, n_samples, n_components,</span></span></div><div class="line">                   skip_num_points=<span class="number">0</span>):</div><div class="line">    <span class="string">"""t-SNE objective function: gradient of the KL divergence</span></div><div class="line">    of p_ijs and q_ijs and the absolute error."""</div><div class="line">    X_embedded = params.reshape(n_samples, n_components)</div><div class="line"></div><div class="line">    <span class="comment"># Q is a heavy-tailed distribution: Student's t-distribution</span></div><div class="line">    n = pdist(X_embedded, <span class="string">"sqeuclidean"</span>)</div><div class="line">    n += <span class="number">1.</span></div><div class="line">    n /= degrees_of_freedom</div><div class="line">    n **= (degrees_of_freedom + <span class="number">1.0</span>) / <span class="number">-2.0</span></div><div class="line">    Q = np.maximum(n / (<span class="number">2.0</span> * np.sum(n)), MACHINE_EPSILON)</div><div class="line"></div><div class="line">    <span class="comment"># Optimization trick below: np.dot(x, y) is faster than</span></div><div class="line">    <span class="comment"># np.sum(x * y) because it calls BLAS</span></div><div class="line"></div><div class="line">    <span class="comment"># Objective: C (Kullback-Leibler divergence of P and Q)</span></div><div class="line">    kl_divergence = <span class="number">2.0</span> * np.dot(P, np.log(P / Q))</div><div class="line"></div><div class="line">    <span class="comment"># Gradient: dC/dY</span></div><div class="line">    grad = np.ndarray((n_samples, n_components))</div><div class="line">    PQd = squareform((P - Q) * n)</div><div class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(skip_num_points, n_samples):</div><div class="line">        np.dot(_ravel(PQd[i]), X_embedded[i] - X_embedded, out=grad[i])</div><div class="line">    grad = grad.ravel()</div><div class="line">    c = <span class="number">2.0</span> * (degrees_of_freedom + <span class="number">1.0</span>) / degrees_of_freedom</div><div class="line">    grad *= c</div></pre></td></tr></table></figure><p>ç”¨æ¢¯åº¦ä¸‹é™ï¼ˆå’Œä¸€äº›tricksï¼‰ä¼˜åŒ–ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯æŸå¤±å‡½æ•°éå¯¹ç§°ï¼Œå¹¶ä¸”ä¸åŒçš„è®­ç»ƒä¼šå¯¼è‡´ç»“æœçš„ä¸åŒã€‚</p><p>sklearné‡Œå¯¹äºbinary searchè®¡ç®— è”åˆåˆ†å¸ƒä¸‹é¢çš„(<a href="https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/manifold/_utils.pyx" target="_blank" rel="external">_utils._binary_search_perplexity</a>)å’ŒBarnes-Hut æ ‘è®¡ç®—æ¢¯åº¦(<a href="https://github.com/scikit-learn/scikit-learn/blob/master/sklearn/manifold/_barnes_hut_tsne.pyx" target="_blank" rel="external">_barnes_hut_tsne.gradient</a>)éƒ½æ˜¯Cå®ç°ï¼Œæœ‰ç©ºå†æ¥ç ”ç©¶ã€‚</p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_joint_probabilities</span><span class="params">(distances, desired_perplexity, verbose)</span>:</span></div><div class="line">    <span class="string">"""Compute joint probabilities p_ij from distances."""</span></div><div class="line">    <span class="comment"># Compute conditional probabilities such that they approximately match</span></div><div class="line">    <span class="comment"># the desired perplexity</span></div><div class="line">    distances = astype(distances, np.float32, copy=<span class="keyword">False</span>)</div><div class="line">    </div><div class="line">    conditional_P = _utils._binary_search_perplexity(</div><div class="line">        distances, <span class="keyword">None</span>, desired_perplexity, verbose)</div><div class="line">    P = conditional_P + conditional_P.T</div><div class="line">    sum_P = np.maximum(np.sum(P), MACHINE_EPSILON)</div><div class="line">    P = np.maximum(squareform(P) / sum_P, MACHINE_EPSILON)</div><div class="line">    <span class="keyword">return</span> P</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">_kl_divergence_bh</span><span class="params">(params, P, neighbors, degrees_of_freedom, n_samples,</span></span></div><div class="line">                      n_components, angle=<span class="number">0.5</span>, skip_num_points=<span class="number">0</span>,</div><div class="line">                      verbose=False):</div><div class="line">    <span class="string">"""t-SNE objective function: KL divergence of p_ijs and q_ijs."""</span></div><div class="line">    params = astype(params, np.float32, copy=<span class="keyword">False</span>)</div><div class="line">    X_embedded = params.reshape(n_samples, n_components)</div><div class="line">    neighbors = astype(neighbors, np.int64, copy=<span class="keyword">False</span>)</div><div class="line">    <span class="keyword">if</span> len(P.shape) == <span class="number">1</span>:</div><div class="line">        sP = squareform(P).astype(np.float32)</div><div class="line">    <span class="keyword">else</span>:</div><div class="line">        sP = P.astype(np.float32)</div><div class="line"></div><div class="line">    grad = np.zeros(X_embedded.shape, dtype=np.float32)</div><div class="line">    error = _barnes_hut_tsne.gradient(sP, X_embedded, neighbors,</div><div class="line">                                      grad, angle, n_components, verbose,</div><div class="line">                                      dof=degrees_of_freedom)</div><div class="line">    c = <span class="number">2.0</span> * (degrees_of_freedom + <span class="number">1.0</span>) / degrees_of_freedom</div><div class="line">    grad = grad.ravel()</div><div class="line">    grad *= c</div><div class="line"></div><div class="line">    <span class="keyword">return</span> error, grad</div></pre></td></tr></table></figure><p><a href="http://lvdmaaten.github.io/tsne/" target="_blank" rel="external">t-SNE â€“ Laurens van der Maaten</a>è¿™ä¸ªé“¾æ¥æ˜¯ä½œè€…æ”¶é›†çš„å„ç§tsneå˜ç§åŠç›¸å…³å®ç°ã€‚</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;/images/15172836269060.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç»“åˆ&lt;a href=&quot;http://lvdmaaten.github.io/publications/papers/JMLR_2008.pdf&quot;&gt;è®ºæ–‡&lt;/a&gt;å…¬å¼ä¸å‡ ä¸ªpythonå®ç°ç†è§£t-SNEç®—æ³•ã€‚&lt;br&gt;
    
    </summary>
    
    
      <category term="python" scheme="http://frankchen.xyz/tags/python/"/>
    
      <category term="Algorithm" scheme="http://frankchen.xyz/tags/Algorithm/"/>
    
  </entry>
  
</feed>
